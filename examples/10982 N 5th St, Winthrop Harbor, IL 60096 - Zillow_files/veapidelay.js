window.$MapsNamespace=window.$MapsNamespace||"Microsoft",window[$MapsNamespace]=window[$MapsNamespace]||{},window[$MapsNamespace].Maps=window[$MapsNamespace].Maps||{},window[$MapsNamespace].Maps.initMapDelayCode=function(){function sr(e,o,s){function ni(){b&&(n.removeHandler(b),n.removeHandler(yt),n.removeHandler(pt),b=null,p.remove_event("mousedown",g).remove_event("dblclick",i).remove_event("touchstart",g).remove_event("keydown",ut).remove_event("keyup",ct),t(y).remove_event("click",st),t(v).remove_event("click",ht),a.parentNode.removeChild(a),a=null,y=null,c=null,v=null)}function kt(n){var n=e.isRotationEnabled();n!==tt&&(tt=n,bt.set_style(tt?{visibility:"visible"}:{visibility:"hidden"}),n||(c.className="NavBar_compass NavBar_compassFlat",rt=null),wt())}function wt(){var t,n;if(tt){t=e.getTargetHeading();if(t!==rt){n="";switch(lt.snapToCardinalHeading(t)){case lt.northUpHeading:n="NavBar_compassN";break;case lt.eastUpHeading:n="NavBar_compassE";break;case lt.southUpHeading:n="NavBar_compassS";break;case lt.westUpHeading:n="NavBar_compassW"}c.className="NavBar_compass "+n,rt=t}}}function ft(n){var i=t.Screen.get_mouse_pos(n),r;isNaN(i.x)&&(i=new f(n.touches[0].pageX,n.touches[0].pageY)),h=new f(i.x-it.x-w.x,i.y-it.y-w.y),r=Math.sqrt(h.x*h.x+h.y*h.y),r<nt&&(h.x=h.x/nt*gt,h.y=h.y/nt*gt)}function et(){Math.abs(h.x)>1||(h.x=0),Math.abs(h.y)>1||(h.y=0);if(h.x||h.y){var n=e.tryPixelToLocation(h);n&&e.setView({center:n,animate:!1})}}function g(n){n.preventMouseEvent&&n.preventMouseEvent(),n.which===1&&(i(n),l(e,n),t(document).add_event("mousemove",k,!0).add_event("mouseup",d,!0).add_event("touchmove",k,!0).add_event("touchend",d,!0).add_event("contextmenu",i,!0),p.add_event("selectstart",i,!0),w=new f(c.offsetWidth/2,c.offsetHeight/2),nt=Math.min(w.x,w.y),it=p.get_absolute_pos(),ft(n),et(),at=window.setInterval(et,100))}function ut(t){t.stopPropagation();var i=new gi("keydown",t.keyCode,t.altKey,t.ctrlKey,t.shiftKey,t.charCode);i.originalEvent=t,n.invoke(e,"keydown",i)}function ct(t){t.stopPropagation();var i=new gi("keyup",t.keyCode,t.altKey,t.ctrlKey,t.shiftKey);i.originalEvent=t,n.invoke(e,"keyup",i)}function k(n){n.preventMouseEvent&&n.preventMouseEvent(),i(n),ft(n)}function d(n){n.preventMouseEvent&&n.preventMouseEvent(),n.which===1&&(i(n),t(document).remove_event("mousemove",k,!0).remove_event("mouseup",d,!0).remove_event("touchmove",k,!0).remove_event("touchend",d,!0).remove_event("contextmenu",i,!0),p.remove_event("selectstart",i,!0),window.clearInterval(at))}function st(n){i(n),l(e,n),dt(90)}function ht(n){i(n),l(e,n),dt(-90)}function dt(n){e.setView({heading:e.getTargetHeading()+n})}var ii=this,a,c,p,it,w,nt,at,h,gt=15,tt,ti,rt,y,v,bt,yt,pt,b;a=r("div",s.getClassName()),ot(a),y=vt("NavBar_rotateLeft",u.getString("L_rotateLeftTooltip_Text")),t(y).add_event("click",st).set_attr("uici","NB.CS.RotateLeft"),c=r("a"),c.href="#",c.onclick=function(){return!1},c.appendChild(document.createTextNode(u.getString("L_compassNorthLabel_Text"))),p=t(c),c.title=u.getString("L_compassTooltip_Text"),v=vt("NavBar_rotateRight",u.getString("L_rotateRightTooltip_Text")),t(v).add_event("click",ht).set_attr("uici","NB.CS.RotateRight"),bt=t([y,v]),p.add_event("mousedown",g).add_event("dblclick",i).add_event("touchstart",g).add_event("keydown",ut).add_event("keyup",ct).set_attr("uici","NB.CS.PanControl"),s.getRotateVisible()&&a.appendChild(y),s.getCompassVisible()&&a.appendChild(c),s.getRotateVisible()&&a.appendChild(v),o.appendChild(a),s.getDomElement=function(){return a},yt=n.addHandler(e,"imagerychanged",kt),pt=n.addHandler(e,"targetviewchanged",wt),kt(),b=n.addHandler(e,"ondispose",ni),this.dispose=ni}function ki(i,u,f){function ft(n){var t=n.keyCode;t in et&&(c+=et[t]||0,c===w.length?c=0:c<0&&(c=w.length-1),a===this&&(c=0,k(),n.stopPropagation()),w[c].receiveFocus(),n.preventDefault())}function k(){nt(),it=new Date,l||(o(e,"show"),l=!0,rt.appendChild(v),t(rt).add_class("activeMenu"),t(document).add_event("keydown",e.hideMenu,!0));if(h.style.visibility==="hidden"){var f=s.offsetHeight,r=t(s).get_relative_pos().x,c=t(s).get_absolute_pos(),n=i.getRootElement(),u=t(n).get_absolute_pos().x+n.offsetWidth-(c.x+h.offsetWidth);u<0&&(r+=u),h.style.top=f+"px",h.style.left=r+"px",h.style.visibility="visible"}}function p(n){nt();if(l){o(e,"hide"),l=!1,v.parentNode.removeChild(v),t(rt).remove_class("activeMenu"),h.style.visibility="hidden";if(n){try{a.focus()}catch(i){}t(document).remove_event("keydown",e.hideMenu,!0)}}}function nt(){tt&&(window.clearTimeout(tt),tt=null),g&&(window.clearTimeout(g),g=null)}var e=this,rt=u,b,l=!1,w=[],it=new Date(0),ot=300,tt,g,c=0,et={38:-1,104:-1,40:1,98:1},s=r("span","NavBar_button NavBar_typeButton"+(f?" "+f:"")),ut=t(s),y,d,st,a,ht,v,h;ut.add_event("mouseenter",function(n){o(e,"mouseenter",n)}).add_event("mouseleave",function(n){o(e,"mouseleave",n)}).add_event("touchstart",function(n){o(e,"touchstart",n)}),y=r("a","NavBar_typeButtonLabel",s),y.href="#",y.appendChild(document.createTextNode("")),d=t(y),d.add_event("click",function(n){o(e,"clicklabel",n)}).add_event("mouseenter",function(n){o(e,"mouseenterlabel",n)}).add_event("mouseleave",function(n){o(e,"mouseleavelabel",n)}),st=r("span","separator",s),a=r("a","NavBar_dropIconContainer",s),a.href="#",t(a).add_event("click",function(n){o(e,"clickicon",n)}).add_event("keydown",ft).add_event("mouseenter",function(n){o(e,"mouseentericon",n)}).add_event("mouseleave",function(n){o(e,"mouseleaveicon",n)}),ht=r("span","NavBar_dropIcon",a),u.appendChild(s),v=r("div","NavBar_ModeSelectorControl"),t(v).add_event("keydown",ft),h=r("ul","MicrosoftMap_NavBar_typeMenu",v),h.style.cssText="position:absolute;visibility:hidden",t(h).add_event("mouseenter",function(n){o(e,"mouseenter",n)}).add_event("mouseleave",function(n){o(e,"mouseleave",n)}),this.dispose=function(){s&&(p(),s.parentNode.removeChild(s),s=null)},this.isShown=function(){return l},this.addMenuItem=function(t,i){t&&(w.push(t),n.addHandler(t,"click",function(t){n.invoke(e,"clickitem",t)})),h.appendChild(i)},this.getItems=function(){return w},this.setMapType=function(n){b&&d.remove_class("NavBar_MapType_"+b),b=n,n&&d.add_class("NavBar_MapType_"+b)},this.getMapType=function(){return b},this.updateLabel=function(n){y.replaceChild(document.createTextNode(n),y.firstChild)},this.setSelected=function(n){n?ut.add_class("NavBar_buttonSel"):ut.remove_class("NavBar_buttonSel")},this.toggleMenu=function(){l?new Date-it>ot&&p():(k(),it=new Date(0))},this.showMenu=function(){k()},this.showMenuDelay=function(n){nt(),l||(tt=window.setTimeout(k,n))},this.hideMenu=function(n){n&&/keydown$/.test(n.type)?n.keyCode===27&&p(!0):p()},this.hideMenuDelay=function(n){nt(),g=window.setTimeout(p,n)}}function bi(u,f,e){var v=this,l=it[u],h=r("li","NavBar_menuitem"+(f?" NavBar_menuItemSel":"")),o=r("a","NavBar_itemContainer NavBar_itemContainer_"+u,h),c;o.style.cssText="display:block;",o.href="#",t(o).add_event("click",function(t){i(t),n.invoke(v,"click",t),e(u)});var y=r("div","NavBar_typePreview NavBar_typePreview_"+u,o),s=r("div","NavBar_typeContent",o),a=r("div","NavBar_typeTitle",s);a.appendChild(document.createTextNode(l.title)),c=r("div","NavBar_typeDesc",s),c.appendChild(document.createTextNode(l.description)),this.getTypeId=function(){return u},this.getElement=function(){return h},this.receiveFocus=function(){try{o.focus()}catch(n){}},this.getContent=function(){return s},this.setSelected=function(n){h.className="NavBar_menuitem"+(n?" NavBar_menuItemSel":"")}}function br(f,e,s,h){function rt(){var e=f.getOptions(),r,i,t,n,u;c=f.getMapTypeId(),c===k?(a=!1,b.disableBirdseye!==!0&&(c=v)):c===v&&(b.disableBirdseye===!0?c=k:a=!0);if(it.hasOwnProperty(c)){r=y.getItems(),i=r.length;while(i--)t=r[i],n=t.getTypeId(),t.setSelected(n==c||g(c)&&g(n));u=it[c],y.updateLabel(u.title),y.setMapType(f.getMapTypeId())}p=e.labelOverlay!==ft.hidden,tt&&(tt.checked=p),d&&(d.checked=a)}function ut(n){n===v&&(n=b.disableBirdseye!==!0&&a?v:k),f.setView({mapTypeId:n,labelOverlay:p||n===ct?ft.visible:ft.hidden});var t=f.getComponent("analyticsProxy");t&&t.logClientAction({uici:"NB.MT.SetMapType",customData:{mt:n}})}function g(n){return n===k||n===v}function ot(n){p=!p,et(n,tt,p)}function st(n){a=!a,et(n,d,a)}function et(n,t,i){n.stopPropagation(),l(f,n),n.currentTarget.tagName==="SPAN"&&t&&(t.checked=i),g(c)&&ut(v),ht&&y.hideMenuDelay(1e3)}function at(t){var i=new ki(f,e),a,u,s,h,r;for(i.mapTypes=t,i.updateLabel(it[t[0]].title),i.setMapType(t[0]),a=[],i.events=a,r=0;r<t.length;r++)u=t[r],u&&(s=new bi(u,c===u,ut),i.addMenuItem(s,s.getElement()),(u===v||u===k&&b.disableBirdseye===!0)&&vt(s.getContent()));h=[["clicklabel",function(n){l(f,n),i.toggleMenu()}],["clickicon",function(n){l(f,n),i.toggleMenu()}],["clickitem",function(n){l(f,n),i.hideMenu()}],["mouseenter",function(){i.showMenu()}],["mouseleave",function(){i.hideMenuDelay(1e3)}],["show",function(){o(lt,"showmaptypemenu",{menuPosition:0})}],["hide",function(){o(lt,"hidemaptypemenu",{menuPosition:0})}]],r=h.length;while(r--)a.push(n.addHandler(i,h[r][0],h[r][1]));return i}function vt(n){var s=r("div","NavBar_checkControls"),o=r("div","NavBar_checkControl",s),f=r("input"),e;f.id="LabelCB_"+ri.getNext(),f.setAttribute("type","checkbox"),t(f).add_event("click",ot),tt=f,o.appendChild(f),f.checked=!0,e=r("span","",o),e.appendChild(document.createTextNode(u.getString("L_aerialShowLabels_Text"))),t(e).add_event("click",function(n){i(n),ot(n)}),b.disableBirdseye!==!0&&(o=r("div","NavBar_checkControl",s),f=r("input"),f.id="TiltCB_"+ri.getNext(),f.setAttribute("type","checkbox"),t(f).add_event("click",st),d=f,o.appendChild(f),f.checked=!0,e=r("span","",o),e.appendChild(document.createTextNode(u.getString("L_aerialEnableTilt_Text"))),t(e).add_event("click",function(n){i(n),st(n)})),n.appendChild(s)}var lt=this,ct=w.auto,v=w.birdseye,k=w.aerial,c=f.getMapTypeId(),b=h,p=!0,a=nt.defaultAerialTiltOn===!0,tt=null,d=null,y=at([w.road,nt.allowCollinsBart?w.collinsBart:null,nt.allowOrdnanceSurvey?w.ordnanceSurvey:null,ct,b.disableBirdseye!==!0?v:k]),yt=n.addHandler(f,"maptypechanged",rt),pt=n.addHandler(f,"optionschanged",rt),wt=!1;rt(),this.dispose=function(){var i=y.events,t=i.length;while(t--)n.removeHandler(i[t]);y.dispose(),n.removeHandler(yt),n.removeHandler(pt)},this.showMenu=function(){y.showMenu()},this.hideMenu=function(){y.hideMenu()},this.getAerialViewSettings=function(){return{showLabels:p,enableTilt:a}},this.setAerialViewSettings=function(n,t){p=n,a=t,g(c)&&ut(v)}}function dr(i,f,e,s){function b(){var l=i.getOptions(),u,r,n,s;c=i.getMapTypeId();if(it.hasOwnProperty(c)){u=h.length;while(u--){var t=h[u],o=!1,e=t.getItems(),f=e.length;while(f--)r=e[f],n=r.getTypeId(),r.setSelected(n==c),n==c&&(o=!0,s=it[n],t.updateLabel(s.title),t.setMapType(n));t.setSelected(o)}}!p&&d(c)&&(a=l.labelOverlay!==ft.hidden,ot.checked=a),p=!1}function v(n){var u=i.getOptions(),r=n==ut||a,t;p=u.labelOverlay!==ft.hidden!==r,i.setView({mapTypeId:n,labelOverlay:r?ft.visible:ft.hidden}),t=i.getComponent("analyticsProxy"),t&&t.logClientAction({uici:"NB.MT.SetMapType",customData:{mt:n}})}function d(n){return n===y||n===k}function g(){var n=h.length;while(n--)h[n].hideMenu()}function tt(n){n.stopPropagation(),l(i,n),a=!a,ot.checked=a,d(c)&&v(c),ht&&h[1].hideMenuDelay(1e3)}function et(t,r){var b=h.length,u=new ki(i,f,r),w,e,s,p;for(u.mapTypes=t,u.updateLabel(it[t[0]].title),u.setMapType(t[0]),w=[],u.events=w,e=0;e<t.length;e++)s=t[e],s&&(p=new bi(s,c===s,v),u.addMenuItem(p,p.getElement()));var y=!1,a=[["clicklabel",function(n){l(i,n),g(),v(u.getMapType())}],["clickicon",function(n){l(i,n),u.toggleMenu()}],["clickitem",function(n){l(i,n),g()}],["mouseentericon",function(){u.showMenu()}],["mouseleaveicon",function(){u.hideMenuDelay(1)}],["mouseenterlabel",function(){y=!0}],["mouseleavelabel",function(){y=!1}],["mouseenter",function(){u.isShown()&&!y&&u.showMenu()}],["mouseleave",function(){u.hideMenuDelay(1e3)}],["show",function(){var t=h.length;while(t--)u!=h[t]&&h[t].hideMenu();o(rt,"showmaptypemenu",{menuPosition:b})}],["hide",function(){o(rt,"hidemaptypemenu",{menuPosition:b})}]],e=a.length;while(e--)w.push(n.addHandler(u,a[e][0],a[e][1]));return u}function st(n){var e=r("div","NavBar_checkControl"),i=r("input"),f;return i.setAttribute("type","checkbox"),t(i).add_event("click",tt),e.appendChild(i),i.checked=!0,f=r("span","",e),f.appendChild(document.createTextNode(u.getString("L_aerialShowLabels_Text"))),t(f).add_event("click",tt),n.addMenuItem(null,e),i}var rt=this,ut=w.auto,k=w.birdseye,y=w.aerial,c=i.getMapTypeId(),ct=s,h=[];h.push(et([w.road,nt.allowCollinsBart?w.collinsBart:null,nt.allowOrdnanceSurvey?w.ordnanceSurvey:null,ut],"NavBar_DropDownMenu_0")),h.push(et(ct.disableBirdseye!==!0?[k,y]:[y],"NavBar_DropDownMenu_1"));var a=!0,ot=st(h[1]),lt=n.addHandler(i,"maptypechanged",b),at=n.addHandler(i,"optionschanged",b),p=!1;b(),this.dispose=function(){var r=h.length;while(r--){var u=h[r],t=u.events,i=t.length;while(i--)n.removeHandler(t[i]);u.dispose()}n.removeHandler(lt),n.removeHandler(at)},this.showMenu=function(n){h[n].showMenu()},this.hideMenu=function(n){h[n].hideMenu()},this.getAerialViewSettings=function(){return{showLabels:a}},this.setAerialViewSettings=function(n,t){a=n,d(c)&&(t?v(k):v(y))}}function gr(e,o,s){function lt(n){i(n),t.Events.capture_mouse(h),y=!0}function g(n){k();var t=Math.min(1,n.touches.length);at||n.touches.length!==1||(p=new f(n.touches[0].pageX,n.touches[0].pageY),p.target=n.target,p.start=new Date),d=new f(n.touches[0].pageX,n.touches[0].pageY),at=d,y=!0,i(n)}function ct(n){i(n);if(y){var r=b(t.Screen.get_mouse_pos(n).y);h.style.top=r+"px",w(r,!0)}}function tt(n){k(),et(),d=new f(n.touches[0].pageX,n.touches[0].pageY);if(y){var t=b(d.y);h.style.top=t+"px",w(t,!0)}i(n)}function pt(n){i(n),y&&(t.Events.release_mouse(),y=!1,w(b(t.Screen.get_mouse_pos(n).y),!1),ut(),l(e,n))}function nt(n){k(),p?(bt(n),l(e,n)):y&&(y=!1,w(b(d.y),!1),ut(),l(e,n)),et()}function ft(n){i(n),w(b(t.Screen.get_mouse_pos(n).y)),l(e,n)}function bt(n){n.target===c&&w(b(p.y))}function et(){p=null}function rt(){var n=e.getZoomRange();a&&a.min==n.min&&a.max==n.max||(a=n),ut()}function b(n){var i=c.offsetHeight-h.offsetHeight;return n-=t(c).get_absolute_pos().y+h.offsetHeight/2,n=Math.max(n,0),n=Math.min(n,i)}function w(n,t){var i=h.offsetHeight/2,f=c.offsetHeight-i,u=n+i,r=Math.round(a.max+(u-i)*-(a.max-a.min)/(f-i));e.setView({zoom:r,suspend:t})}function dt(n,t){if(a){var i=h.offsetHeight/2,u=c.offsetHeight-i,r=Math.round(i+(u-i)*(t-a.max)/-(a.max-a.min));n.style.top=r-n.offsetHeight/2+"px"}}function ut(){dt(h,e.getTargetZoom())}function st(){it&&(window.clearTimeout(it),it=null)}function k(){st(),ht&&(it=window.setTimeout(wt,5e3))}function wt(){st(),o.style.display="none"}var gt=this,v,c,kt,h,ht=s,yt,vt,y,a,p,d,at,it;v=r("div","NavBar_zoom"),ot(v),c=r("div","NavBar_zoomBar",v),c.style.cssText="position:absolute;overflow:hidden",t(c).add_event("click",ft).add_event("touchstart",g).add_event("touchmove",tt).add_event("touchend",nt),kt=r("div","NavBar_zoomBarBg",c),h=r("div","NavBar_zoomSlider",c),h.title=u.getString("L_zoomSliderTooltip_Text"),t(h).add_event("mousedown",lt).add_event("mouseup",pt).add_event("mousemove",ct).add_event("click",i).add_event("touchstart",g).add_event("touchmove",tt).add_event("touchend",nt),t(v).add_event("mousedown",i).add_event("mouseup",i).add_event("mousemove",i).add_event("click",i).add_event("touchstart",i).add_event("touchmove",i).add_event("touchend",i),o.appendChild(v),yt=n.addHandler(e,"targetviewchanged",rt),vt=n.addHandler(e,"imagerychanged",rt),ht&&k(),this.getDomElement=function(){return v},this.dispose=function(){v&&(t(c).remove_event("click",ft).remove_event("touchstart",g).remove_event("touchmove",tt).remove_event("touchend",nt),t(h).remove_event("mousedown",lt).remove_event("mouseup",pt).remove_event("mousemove",ct).remove_event("click",i).remove_event("touchstart",g).remove_event("touchmove",tt).remove_event("touchend",nt),t(v).remove_event("mousedown",i).remove_event("mouseup",i).remove_event("mousemove",i).remove_event("click",i).remove_event("touchstart",i).remove_event("touchmove",i).remove_event("touchend",i),n.removeHandler(yt),n.removeHandler(vt),v.parentNode.removeChild(v),c=null,h=null,v=null)},this.show=function(){rt()},this.resetZoomBarTimer=k}function kr(u,f,e){function w(){s&&(n.removeHandler(p),n.removeHandler(s),s=null,v.removeNavigationBar(u))}function a(){var i=f.getDomElement(),r,n;i&&(r=i.offsetWidth,n="",r>665?r>774||(n="medium"):n="narrow",n!==h&&(t(i).remove_class(h).add_class(n),h=n))}function y(n){var t,u,i;t=c[n],u=f.getDomElement();if(!t){t=r("div","NavBar_clientRegion NavBar_clientRegion_"+b.getName(n));switch(n){case b.left:i=c[b.middle],u.insertBefore(t,i?i.nextSibling:e.getDomElement().nextSibling);break;case b.middle:t=e.getDomElement();break;case b.right:u.appendChild(t)}c[n]=t,a()}return t}var c={},o={},h="",s,p;v.registerNavigationBar(u,this),s=n.addHandler(u,"ondispose",w),p=n.addHandler(u,"resize",a),this.addClientButton=function(n,r,f,e,s){var c=y(n),h=typeof f=="string"?vt(e,f):f;return c.appendChild(h),o[r]=h,t(h).add_event("click",function(n){typeof f=="string"&&i(n),l(u,n),s&&s(r)}).set_attr("uici","NB.TB."+f),h},this.updateClientButton=function(n,i,r){var u=o[n];u&&(u.className="NavBar_button NavBar_toolButton "+(r||""),u.title=i||"",t(u).set_attr("uici","NB.TB."+i))},this.removeClientButton=function(n,t){var r=y(n),i=o[t];i&&(delete o[t],r.removeChild(i))}}function iu(f,o,s){function vr(){n.removeHandler(at),at=null,hr=f.getTargetCenter(),lr=f.getTargetZoom()}function pt(){gt&&(f.entities.remove(gt),gt=null),c.current.style.display!=="none"&&(c.current.style.display="none",c.currentDelim.style.display="none",g=p[d],y())}function cr(){c.current.style.display==="none"&&(l.currentZoom=f.getTargetZoom(),l.currentCenter=f.getTargetCenter(),c.current.style.display="inline-block",c.currentDelim.style.display="inline",y())}function tf(n){ni=n,y()}function er(){et=ni!==null?ni:ef()}function ef(){var r=c.breadcrumbContainer,u=c.breadcrumb,n,i;return u&&r?(n=t(u),i=r.offsetWidth-parseInt(n.get_style("paddingLeft"))-parseInt(n.get_style("paddingRight")),i>0?i:0):0}function wu(){y()}function yu(){var t,n,i;er();if(et>0)c.breadcrumb&&(c.breadcrumb.style.display="block");else{c.breadcrumb&&(c.breadcrumb.style.display="none");return}t=c.breadcrumbBar.offsetWidth;if(t>=et)for(n=0,i=p.length-1;n<i;n++){c[p[n]].firstChild.nodeValue="...",c[p[n]].setAttribute("title",l[p[n]]),t=c.breadcrumbBar.offsetWidth;if(t<et)break}tu()}function tu(){var t,n,i;er();if(et>0)c.breadcrumb&&(c.breadcrumb.style.display="block");else{c.breadcrumb&&(c.breadcrumb.style.display="none");return}t=c.breadcrumbBar.offsetWidth;if(t>=et)for(n=0,i=b.length;n<i;n++){a[b[n].name].firstChild.nodeValue="...",a[b[n].name].setAttribute("title",b[n].value),t=c.breadcrumbBar.offsetWidth;if(t<et)break}tr(rt)}function br(){c.breadcrumb&&(hi(c.breadcrumbContainer),c.breadcrumbContainer.parentNode.removeChild(c.breadcrumbContainer),c.breadcrumbContainer=null,c.breadcrumb=null)}function bu(t){var f=a[t+"Delim"],u,i,r;f&&(f.parentNode.removeChild(f),a[t+"Delim"]=null),u=ct(t),u.type==="group"?(i=t+"Click",n.removeHandler(k[i]),k[i]=null,i=t+"MouseEnter",n.removeHandler(k[i]),k[i]=null,i=t+"MouseLeave",n.removeHandler(k[i]),k[i]=null,u===rt&&ut(!0),r=a[t+"Container"],a[t+"Container"]=null,a[t]=null,a[t+"ListSign"]=null,r.parentNode.removeChild(r)):(i=t+"Click",n.removeHandler(k[i]),k[i]=null,r=a[t],a[t]=null,r.parentNode.removeChild(r))}function ku(t){var i,r,u;g=t,y();switch(t){case"world":case"country":case"state":case"county":case"city":case"neighborhood":cr();break;case"current":pt();break;default:n.invoke(v,"pathnodeclicked",{pathNodeLevel:t,pathNodeValue:ct(t).value});return}i={animate:ru},f.isStreetside&&f.isStreetside()&&(i.mapTypeId=w.road),r=l[t+"Bounds"],r?(u=ti.fromEdges(r[2],r[1],r[0],r[3]),i.bounds=u):t==="current"?(i.center=l.currentCenter,i.zoom=l.currentZoom):(i.center=l.currentCenter,i.zoom=l[t+"Zoom"]),of(i),n.invoke(v,"pathnodeclicked",{pathNodeLevel:t,pathNodeValue:l[t]})}function dr(){ku(this.attributes.pathNodeLevel.value)}function bi(){var h,u,n,e;c.root||(c.root=f.getRootElement(),h=r("div","pathContainer"),c.breadcrumb=h,h.setAttribute("onselectstart","return false;"),u=r("div",s.getClassName(),o),s.getDomElement=function(){return u},ot(u),c.breadcrumbContainer=u,u.appendChild(c.breadcrumb),n=document.createElement("div"),n.className="unlockButton",e=t(n),e.add_event("click",vi),e.add_event("touchstart",i),e.add_event("touchend",vi),c.root.appendChild(n),c.breadcrumbUnlock=n,pu())}function pu(){var f,i,r,e,o,n;if(c.breadcrumb){f=document.createElement("span"),f.className="path";for(i in ft)r=document.createElement("span"),i!=="world"?(i==="current"&&(e=document.createElement("span"),f.appendChild(e),c.breadcrumbExtension=e),o="•",r.className="pathNodeDelim",r.style.display="none"):(o="",r.className="pathHeight",r.style.display="inline-block"),r.appendChild(document.createTextNode(o)),f.appendChild(r),c[i+"Delim"]=r,i==="current"?(n=document.createElement("a"),n.className="currentIcon",n.href="#",n.title=u.getString("L_currentIconTooltip_Text")):(n=document.createElement("a"),n.href="#",n.className="pathNode",i!=="world"?n.appendChild(document.createTextNode("")):n.appendChild(document.createTextNode(l[i]))),i!=="world"&&(n.style.display="none"),t(n).add_event("click",dr),n.setAttribute("pathNodeLevel",i),n.setAttribute("uici","BC.PN."+i),f.appendChild(n),c[i]=n;c.breadcrumbBar=f,c.breadcrumb.appendChild(f)}}function wi(){h.country=null,h.state=null,h.county=null,h.city=null,h.neighborhood=null,h.street=null,h.current=null,h.countryBounds=null,h.stateBounds=null,h.countyBounds=null,h.cityBounds=null,h.neighborhoodBounds=null,h.streetBounds=null,h.currentBounds=null,h.countryEntityId=null,h.stateEntityId=null,h.countyEntityId=null,h.cityEntityId=null,h.neighborhoodEntityId=null,h.streetEntityId=null,h.currentEntityId=null}function pi(){c.breadcrumbUnlock.style.display="block"}function ki(){c.breadcrumbUnlock.style.display="none"}function du(n,t,i,r,u){var f={type:n,name:t,value:i,values:r,isVisible:u};b.push(f),nf(f)}function nf(n){var u=document.createElement("span"),e="•",r,f,i;u.className="pathNodeDelim",u.style.display="none",u.appendChild(document.createTextNode(e)),a[n.name+"Delim"]=u,c.breadcrumbExtension.appendChild(u),n.type==="group"?(r=document.createElement("span"),r.className="groupContainer",r.style.display="none",r.setAttribute("pathNodeLevel",n.name),k[n.name+"Click"]=t(r).add_event("click",rf),k[n.name+"MouseEnter"]=t(r).add_event("mouseenter",rr),k[n.name+"MouseLeave"]=t(r).add_event("mouseleave",ir),i=document.createElement("span"),i.className="group",i.appendChild(document.createTextNode("")),f=document.createElement("span"),f.className="groupListSign",a[n.name+"Container"]=r,a[n.name]=i,a[n.name+"ListSign"]=f,r.appendChild(i),r.appendChild(f),c.breadcrumbExtension.appendChild(r)):(i=document.createElement("span"),i.className="pathNode",i.appendChild(document.createTextNode("")),i.style.display="none",k[n.name+"Click"]=t(i).add_event("click",dr),i.setAttribute("pathNodeLevel",n.name),i.setAttribute("uici","BC.PN."+n.name),a[n.name]=i,c.breadcrumbExtension.appendChild(i))}function gu(n,t){var i=ct(n);if(i.isVisible===t)return;i.type==="group"&&t===!1&&i===rt&&ut(!0),i.isVisible=t,y()}function vu(n){bu(n),b.splice(au(n),1),y()}function ct(n){var t=b.length;while(t--)if(b[t].name===n)return b[t]}function au(n){var t=b.length;while(t--)if(b[t].name===n)return t}function yi(t,i){var r=ct(t),u=r.value;r.value=i,a[t].firstChild.nodeValue=i,oi(t),y(),n.invoke(v,"groupselecteditemchanged",{groupName:t,newItem:i,oldItem:u})}function ai(t){ht=!0,lt=t,kt(!0),n.invoke(v,"locked")}function of(t){at||(at=n.addHandler(f,"targetviewchanged",vr)),f.setView(t),window.setTimeout(function(){at&&vr()},100)}function sf(){ht=!1}function hf(){ht=!1,ki(),ut(!0),pt(),wi(),h.currentZoom=f.getTargetZoom(),gi(),g=p[d],y(),lt=f.getTargetCenter(),kt(!0),n.invoke(v,"unlocked")}function vi(t){hf(),n.invoke(v,"closed"),t.stopPropagation()}function rf(){var i=this.attributes.pathNodeLevel.value,r=ct(i);oi(i),y(),a.groupList?ut(!0):nr(r),n.invoke(v,"pathnodeclicked",{pathNodeLevel:i,pathNodeValue:r.value})}function rr(){nr(ct(this.attributes.pathNodeLevel.value))}function ir(){a.groupList&&ut()}function yt(n){yi(rt.name,this.firstChild.nodeValue),ut(!0),i(n)}function ur(){var u,f,r;it=null;if(a.groupList){n.removeHandler(fi),n.removeHandler(ei),u=a.groupList.childNodes,f=u.length;while(f--)r=t(u[f]),r.remove_event("click",yt),r.remove_event("touchstart",i),r.remove_event("touchend",yt);fi=null,ei=null,a.groupList.parentNode.removeChild(a.groupList),a.groupList=null,rt=null}}function ut(n){a.groupList&&(n?(it&&(clearTimeout(it),it=null),ur()):it||(it=setTimeout(ur,1e3)))}function tr(n){var i=a.groupList;if(i){var u=t(o).get_absolute_pos(),r=c.breadcrumb,e=t(r).get_absolute_pos().y+r.offsetHeight-u.y,f=t(a[n.name+"Container"]).get_absolute_pos().x-u.x;i.style.top=e+"px",i.style.left=f+"px"}}function nr(n){var r,e,u,f;if(rt)if(rt!==n)ut(!0);else{it&&(clearTimeout(it),it=null);return}r=document.createElement("ul"),a.groupList=r,rt=n,r.className="pathList",r.style.position="absolute",r.setAttribute("pathNodeLevel",n.name),o.appendChild(r),fi=t(r).add_event("mouseenter",rr),ei=t(r).add_event("mouseleave",ir);for(e in n.values)u=document.createElement("li"),u.appendChild(document.createTextNode(n.values[e])),r.appendChild(u),f=t(u),f.add_event("click",yt),f.add_event("touchstart",i),f.add_event("touchend",yt);tr(n)}function uf(){l.country=null,l.state=null,l.county=null,l.city=null,l.neighborhood=null,l.street=null,l.current=null,l.countryBounds=null,l.stateBounds=null,l.countyBounds=null,l.cityBounds=null,l.neighborhoodBounds=null,l.streetBounds=null,l.currentBounds=null,l.countryEntityId=null,l.stateEntityId=null,l.countyEntityId=null,l.cityEntityId=null,l.neighborhoodEntityId=null,l.streetEntityId=null,l.currentEntityId=null,d=ft.world,g="world"}function si(){li=or,st++,f.getCredentials(function(n){if(n){var t=wr+"/"+lt.latitude.toFixed(10)+","+lt.longitude.toFixed(10)+"?include=EntityId&includeEntityTypes=Neighborhood,PopulatedPlace,AdminDivision1,AdminDivision2,CountryRegion&output=json&key="+n+"&culture="+ui;tt.useXHR||(t+="&jsonp=microsoftMapsNetworkCallback&jsonso={jsono}"),wt.getObjectAsync(t,su,st)}})}function kt(n,t){n?(clearTimeout(nt),nt=null,si()):(li===ar&&nt&&(clearTimeout(nt),nt=null),st++,li=ar,nt=t?setTimeout(si,t):setTimeout(si,ff))}function ci(n){var o="",e=ft[n]+1,t;while(e-->1){var r=p[e],u=iu[r],i=h[r];if(u&&i)o+="&"+u+"="+i;else{ri();return}}n!=="street"&&(t=yr.get(h[n+"EntityId"])),t?(h[n+"Bounds"]=t,ri()):f.getCredentials(function(n){if(n){var t=wr+"?key="+n+"&culture="+ui+"&output=json"+o;tt.useXHR||(t+="&jsonp=microsoftMapsNetworkCallback&jsonso={jsono}"),wt.getObjectAsync(t,gr,st)}})}function y(){var f=ft,u,n,i,r;bt.selectedCrumb=g;for(n in f)i=c[n],n!=="current"&&(n==="street"?i.firstChild.nodeValue="Near "+l[n]:(u=l[n],u||(u=""),i.firstChild.nodeValue=u),i.removeAttribute("title"),r=c[n+"Delim"],(ft[n]<=d||ht)&&l[n]?(i&&(i.style.display="inline",n===g?t(i).add_class("pathNodeSelected"):t(i).remove_class("pathNodeSelected")),r&&n!=="world"&&(r.style.display="inline")):(i&&(i.style.display="none"),r&&n!=="world"&&(r.style.display="none")));hu(),yu()}function hu(){for(var n,i,r,u=0,f=b.length;u<f;u++)n=b[u],i=a[n.name],i.firstChild.nodeValue=n.value,i.removeAttribute("title"),r=a[n.name+"Delim"],n.isVisible?(i&&(n.type==="group"?a[n.name+"Container"].style.display="inline":i.style.display="inline",n.name===g?t(i).add_class("pathNodeSelected"):t(i).remove_class("pathNodeSelected")),r&&(r.style.display="inline")):(i&&(n.type==="group"?(a[n.name+"Container"].style.display="none",ut(!0)):i.style.display="none"),r&&(r.style.display="none"))}function su(n,t){var c=t.userData,s,e,f,o,u,r,i;if(c===st&&t.success&&n.statusCode===200){s=n.resourceSets[0],e=!1;if(s.estimatedTotal>0){f=s.resources,wi(),u=f.length;while(u--){r=f[u],o=r.entityType;if(di[o]&&o!=="Neighborhood"){i=r.address,h.country=i.countryRegion,h.state=i.adminDistrict,h.county=i.adminDistrict2,h.city=i.locality,h.street=i.addressLine,h.countryEntityId=i.countryRegionEntityId,h.stateEntityId=i.adminDistrictEntityId,h.countyEntityId=i.adminDistrict2EntityId,h.cityEntityId=i.localityEntityId,h.streetEntityId=i.addressLineEntityId;break}}u=f.length;while(u--){r=f[u];if(r.entityType==="Neighborhood"){i=r.address,h.country=i.countryRegion,h.state=i.adminDistrict,h.county=i.adminDistrict2,h.neighborhood=i.locality,h.countryEntityId=i.countryRegionEntityId,h.stateEntityId=i.adminDistrictEntityId,h.countyEntityId=i.adminDistrict2EntityId,h.neighborhoodEntityId=i.localityEntityId;break}}e=!0}else uf(),y();bt={currentCrumb:p[d],selectedCrumb:g,country:h.country,state:h.state,county:h.county,neighborhood:h.neighborhood,city:h.city,street:h.street,location:n},e&&cu()}}function lu(n,t){var i=di[n];h[i+"Bounds"]=t,yr.add(h[i+"EntityId"],t)}function cu(){kr=3,ci("city"),ci("state"),ci("country")}function gr(n,t){var r=t.userData,i;r===st&&t.success&&n&&n.statusCode===200&&n.resourceSets&&n.resourceSets.length>0&&n.resourceSets[0].resources&&n.resourceSets[0].resources.length>0&&(i=n.resourceSets[0].resources[0],lu(i.entityType,i.bbox)),ri()}function ri(){--kr||(l=h,gi(),bt.currentCrumb=p[d],n.invoke(v,"breadcrumbschanged"),y())}function uu(n){var t=f.getBounds();return!(n.width>t.width||n.height>t.height)}function ou(n){var i=f.getBounds(),t=Math.min(i.width/4,i.height/4);return n.width>=t||n.height>=t}function gi(){var n,u,t,r,f,i;if(ht){d=ft.neighborhood;return}for(n=0,u=p.length-1;n<u;n++)if(l[p[n]]){t=l[p[n]+"Bounds"];if(t){r=ti.fromEdges(t[2],t[1],t[0],t[3]);if(uu(r)){f=r,ou(r)&&(d=n);break}else d=n}else{i=l[p[n]+"Zoom"];if(i)if(i<l.currentZoom)d=n;else if(i<l.currentZoom+2){d=n;break}}}g=p[d]}function eu(){bi(),lt=f.getTargetCenter(),h.currentZoom=f.getTargetZoom(),kt(!1,5e3),sr=n.addHandler(f,"viewchangeend",fu)}function fu(){ii.areEqual(f.getTargetCenter(),hr)&&f.getTargetZoom()===lr||(pt(),ht===!1?(lt=f.getCenter(),h.currentZoom=f.getZoom(),kt()):y())}function oi(n){g!==n&&(g=n,y())}function fr(){nt&&(clearTimeout(nt),nt=null),n.removeHandler(sr),br()}function pr(){dt&&(n.removeHandler(dt),dt=null,fr(),f.addComponent("breadcrumb",v))}var wr=e.Globals.bingMapsRESTServicesUrl,ui="en-us",nu=["cs-cz","da-dk","nl-nl","en-ca","en-gb","en-us","fi-fi","fr-ca","fr-fr","de-de","it-it","ja-jp","nb-no","pt-br","pt-pt","es-es","es-us","sv-se"],kr=0,et=0,ni=null,st=0,lt,rt,fi=null,ei=null,k={},gt,ru=!0,v=this,ht=!1,sr,cf,af="navigationBar",bt={},g="world",lf=0,or="ready",ar="wait",li=or,hr,lr,at,nt,ff=1e3,it,b=[],l={world:u.getString("L_world_Text"),worldBounds:[-75,-175,75,175],countryZoom:4,stateZoom:7,countyZoom:10,cityZoom:13,neighborhoodZoom:15,streetZoom:16,current:""},h=l,ft={world:0,country:1,state:2,county:3,city:4,neighborhood:5,street:6,current:7},p=["world","country","state","county","city","neighborhood","street","current"],d=ft.world,c={},a={},yr={_cacheSize:100,_history:[],_recentlyUsed:[],_cache:{},add:function(n,t){if(!n)return;this._cache[n]=t,this._history.push(n),this._history.length>this._cacheSize&&delete this._cache[this._history.shift()]},get:function(n){return n?this._cache[n]:null}},iu={street:"addressLine",city:"locality",county:"adminDistrict2",state:"adminDistrict",country:"countryRegion"},di={Dependent:"country",Sovereign:"country",CountryRegion:"country",AdminDivision1:"state",AdminDivision2:"county",PopulatedPlace:"city",Neighborhood:"neighborhood",Address:"street"},vt=e.Globals.locale,dt;vt&&(vt=vt.toLowerCase(),t(nu).index_of(vt)!==-1&&(ui=vt)),n.addHandler(f,"resize",wu),f.addComponent("breadcrumb",v),dt=n.addHandler(f,"ondispose",pr),v.enable=eu,v.disable=fr,v.dispose=pr,v.setWidth=tf,v.lockToLocation=ai,v.unlockFromLocation=sf,v.showCloseButton=pi,v.hideCloseButton=ki,v.addCrumb=du,v.removeCrumb=vu,v.setVisibility=gu,v.selectGroupItem=yi,v.highlightCrumb=oi,v.showBookmark=cr,v.hideBookmark=pt,v.relocateCloseButton=function(n,t){c.breadcrumbUnlock.style.top=n,c.breadcrumbUnlock.style.right=t},v.getBreadcrumbs=function(){return bt},this.enable()}function tu(f,e,o){function it(){y&&(n.removeHandler(y),y=null,a&&a.dispose(),t(b).remove_event("click",nt).remove_event("mouseenter",c).remove_event("mouseleave",v),t(w).remove_event("click",tt).remove_event("mouseenter",c).remove_event("mouseleave",v),s.parentNode.removeChild(s))}function tt(n){i(n),l(f,n),ht()?c():d(),f.setView({zoom:f.getTargetZoom()+1})}function nt(n){i(n),l(f,n),ht()?c():d(),f.setView({zoom:f.getTargetZoom()-1})}function c(){k(),o.getZoomBarVisible()&&(h||(h=r("div","NavBar_zoomDrop"),h.style.cssText="position:absolute;display:none;",a=new gr(f,h,o.getZoomBarToggle()),s.firstChild?s.insertBefore(h,s.firstChild):s.appendChild(h),o.getZoomBarToggle()&&t(h).add_event("mouseenter",c).add_event("mouseleave",v)),h.style.display==="none"&&(h.style.display="",a.show()),ht()&&a.resetZoomBarTimer())}function v(){k(),p=window.setTimeout(d,1e3)}function d(){k(),o.getZoomBarToggle()&&h&&(h.style.display="none")}function k(){p&&(window.clearTimeout(p),p=null),g&&(window.clearTimeout(g),g=null)}var rt=this,s,w,b,h,a,p,g,y;s=r("div",o.getClassName()),ot(s),b=vt("NavBar_zoomOut",u.getString("L_zoomOutTooltip_Text")),t(b).add_event("click",nt).add_event("mouseenter",c).add_event("mouseleave",v).set_attr("uici","NB.ZC.ZoomOut"),w=vt("NavBar_zoomIn",u.getString("L_zoomInTooltip_Text")),t(w).add_event("click",tt).add_event("mouseenter",c).add_event("mouseleave",v).set_attr("uici","NB.ZC.ZoomIn"),o.getZoomOutVisible()&&s.appendChild(b),o.getZoomInVisible()&&s.appendChild(w),e.appendChild(s),o.getZoomBarToggle()||c(),o.getDomElement=function(){return s},y=n.addHandler(f,"ondispose",it),this.dispose=it}function nu(t,i,u){function a(){if(c){n.removeHandler(c),c=null;var t=e.length;while(t--)n.removeHandler(e[t][2]);h.dispose(),f.parentNode.removeChild(f)}}var e=[["showmaptypemenu",function(n){o(v.getNavBar(t),"showmaptypemenu",n)}],["hidemaptypemenu",function(n){o(v.getNavBar(t),"hidemaptypemenu",n)}]],h,f=r("div",u.getClassName()),y,l,s,c;ot(f),y=r("span","NavBar_separator",f),l={disableBirdseye:u.getDisableBirdseye()},h=u.getMapTypes()!==null?new dr(t,f,this,l):new br(t,f,this,l),i.appendChild(f),u.getDomElement=function(){return f},s=e.length;while(s--)e[s][2]=n.addHandler(h,e[s][0],e[s][1]);c=n.addHandler(t,"ondispose",a),this.dispose=a}function ar(t,i,u){function y(){s&&(n.removeHandler(s),n.removeHandler(b),s=null,f.parentNode.removeChild(f)),p&&n.removeHandler(p),v&&n.removeHandler(v)}for(var l=new k,f=r("div",u.getClassName()),w=u.getLength(),a,o,h,e=0;e<w;e++)a=u.get(e),o=c.getRenderer(a),typeof o=="function"&&new o(t,f,a);u.getStopPropagation()&&ot(f),i=u.getParentOverride()||i,h=u.getNextSibling(),h?i.insertBefore(f,h):i.appendChild(f),u.getDomElement=function(){return f},l.setContext(f);var b=n.addHandler(u,"entitychanged",function(n){n&&n.entity==u&&(n.handled=!0,f.className=u.getClassName(),u.getStopPropagation()?ot(f):hi(f))}),p=n.addHandler(u,"entityadded",function(n){if(n&&n.collection==u){var i=n.entity,r=c.getRenderer(i);typeof r=="function"&&new r(t,f,i),l.insert(i,n.index)}}),v=n.addHandler(u,"entityremoved",function(n){l.remove(n.entity)}),s=n.addHandler(t,"ondispose",y);this.dispose=y}function k(n){function o(n){var t=document.createElement("div");return t.className="item",t.style.marginRight="1px",t.entity=n,t}function s(n){var t=n.length;while(t--)f(n[t])}function f(n){n.parentNode&&n.parentNode.removeChild(n)}function u(n){var h,o,u,f,s;if(!r)return;for(h=n===k.Layout.TopBottom||n===k.Layout.BottomTop?"none":"left",((i===k.Layout.TopBottom||i===k.Layout.LeftRight)&&(n===k.Layout.BottomTop||n===k.Layout.RightLeft)||(i===k.Layout.BottomTop||i===k.Layout.RightLeft)&&(n===k.Layout.TopBottom||n===k.Layout.LeftRight))&&t.reverse(),o=0;o<t.length;o++)u=t[o],u.wrapped||(f=u.entity,s=f&&f.getDomElement&&f.getDomElement(),s?u.appendChild(s):u.appendChild(f),u.wrapped=!0),u.style.cssFloat!==undefined?u.style.cssFloat=h:u.style.styleFloat!==undefined&&(u.style.styleFloat=h),r.appendChild(u);r.appendChild(e)}var r=n,t=[],i=k.Layout.TopBottom,e=document.createElement("span");e.style.cssText="display:block;height:0;width:0;line-height:0;font-size:0;clear:both;",this.setContext=function(n){r||(r=n,u(i))},this.add=function(n){var r=o(n);t.push(r),u(i)},this.insert=function(n,r){var f=o(n);t.splice(r,0,f),u(i)},this.pop=function(){f(t.pop())},this.removeAt=function(n){s(t.splice(n,1))},this.remove=function(n){var i=t.length;while(i--)if(t[i].entity===n){this.removeAt(i);break}},this.clear=function(){s(t),t.length=0},this.setLayout=function(n){n!==i&&(u(n),i=n)}}function wi(n){var i=document.createElement("span");t(i).add_class("shadowtextDark"),n.appendChild(i),this.setColorsForDarkBackground=function(){t(i).swap_class("shadowtextDark","shadowtextLight")},this.setColorsForLightBackground=function(){t(i).swap_class("shadowtextLight","shadowtextDark")},this.setHtmlContent=function(n){i.innerHTML=n},this.setTextContent=function(n){i.innerHTML="",i.appendChild(document.createTextNode(n))}}function cr(t,i,u){function h(){p(),e=window.setTimeout(g,k)}function p(){e!=null&&window.clearTimeout(e)}function g(){e=null,f.getCopyrights(nt)}function nt(i,r){r!==l&&(l=r,n.invoke(t,"logorequirementschanged",{showCombinedLogo:l}));for(var f=i.concat(a).sort(function(n,t){return(n||"").length>(t||"").length}),e=f.length,u=0;u<e;u++)f[u]&&(f[u]='<span class = "copyrightAttribution">'+f[u]+"</span>");v.setHtmlContent(f.join(""))}function c(){d.getImageryBackground(t.getImageryId())===d.light?v.setColorsForLightBackground():v.setColorsForDarkBackground()}function b(){if(o){n.removeHandler(o),o=null;var t=s.length;while(t--)n.removeHandler(s[t]);s.length=0}}var w=r("div",u.getClassName(),i),s,o,y;u.getDomElement=function(){return w};var v=new wi(w),f=t,a=[],e=null,k=1e3,l=null;h(),c(),s=[n.addThrottledHandler(f,"copyrightchanged",h,2e3),n.addHandler(f,"imagerychanged",c),n.addHandler(f,"modechanged",c),n.addHandler(f,"viewchangestart",p)],o=n.addHandler(t,"ondispose",b),y=new function(){this.get_customAttributions=function(){return a},this.set_customAttributions=function(n){a=n,h()}},t.addComponent("copyright",y)}function vr(i,f,e){function ti(){var d,k,b,f,w;rt=n.addHandler(i,"ondispose",oi),a=r("div",e.getClassName(),ni),e.getDomElement=function(){return a},l=t(a),(at||yt)&&l.add_event("mouseover",ht).add_event("mouseout",ct).add_event("mousedown",s).add_event("mouseup",s).add_event("dblclick",s).add_event("contextmenu",s).add_event("click",s),o=document.createElement("a"),o.href="http://www.bing.com",o.title=u.getString("L_BingLogoTooltip_Text"),o.target="mc_bingMaps",at?n.addHandler(i,"viewchangeend",dt):(o.onclick=function(){return!1},o.style.cursor="default",o.tabIndex=-1),ut=document.createElement("span"),ut.id="bingLogo",o.appendChild(ut),p=document.createElement("span"),p.id="cobrandLogo",p.style.display="none",o.appendChild(p),d=document.createElement("span"),d.className="ms-clear",d.style.cssText="float: none !important",o.appendChild(d),a.appendChild(o),n.addHandler(i,"imagerychanged",ft),n.addHandler(i,"maptypechanged",ft),n.addHandler(i,"logorequirementschanged",vt),ft(),vt({showCombinedLogo:!1}),yt&&(k=document.createElement("div"),k.className="LogoSearchContainer",b=document.createElement("div"),b.className="LogoSearchGroup",k.appendChild(b),f=document.createElement("input"),f.id="LogoSearchInput",f.type="text",tt.useXHR&&(f.style.margin="0"),f.maxLength=60,f.className="watermark",f.value=u.getString("L_BingSearchWatermark_Text"),y=!0,b.appendChild(f),w=document.createElement("input"),w.id="LogoSearchGo",tt.useXHR||(w.type="button"),w.title=u.getString("L_BingSearchGoTooltip_Text"),b.appendChild(w),h=t(k),h.set_style({display:"none"}),v=!1,t(o).add_event("focus",ht).add_event("blur",ct).add_event("keypress",ei),h.add_event("mouseover",bt).add_event("mouseout",wt).add_event("mousedown",s).add_event("mouseup",s).add_event("dblclick",s).add_event("contextmenu",s),it=t(w),it.add_event("blur",ot).add_event("focus",et).add_event("click",st),c=t(f),c.add_event("blur",pt).add_event("focus",lt).add_event("keydown",gt),a.appendChild(k))}function oi(){rt&&(n.removeHandler(rt),rt=null),o&&n.removeHandler(dt),l&&l.remove_event("mouseover",ht).remove_event("mouseout",ct).remove_event("mousedown",s).remove_event("mouseup",s).remove_event("dblclick",s).remove_event("contextmenu",s).remove_event("click",s),a.parentNode.removeChild(a),h&&(h.remove_event("mouseover",bt).remove_event("mouseout",wt).remove_event("mousedown",s).remove_event("mouseup",s).remove_event("dblclick",s).remove_event("contextmenu",s),it.remove_event("blur",ot).remove_event("focus",et).remove_event("click",st),c.remove_event("blur",pt).remove_event("focus",lt).remove_event("keydown",gt),h.element().parentNode.removeChild(h.element())),b(),o=null,ut=null,p=null,a=null,it=null,c=null,h=null}function b(){h&&w&&(window.clearTimeout(w),w=null)}function g(){h&&k&&(b(),w=window.setTimeout(ui,2e3))}function kt(){y||c.element().value||(c.element().value=u.getString("L_BingSearchWatermark_Text"),c.add_class("watermark"),y=!0)}function ii(){y&&(c.element().value="",c.remove_class("watermark"),y=!1)}function ui(){w=null,ri(),k=!1}function ri(){h.set_style({display:"none"}),l.remove_class("Active"),h.set_style("width",null)}function dt(){if(o){var t=i.getCenter();t&&(o.href=nt.logoBingMapsLink.replace("{0}",t.latitude).replace("{1}",t.longitude).replace("{2}",i.getZoom()))}}function vt(n){t(p).set_style({display:n.showCombinedLogo?"":"none"}),l.set_style({display:fi&&!n.showCombinedLogo?"none":""})}function ft(){d.getImageryBackground(i.getImageryId())===d.dark?l.add_class("dark"):l.remove_class("dark")}function bt(){b()}function wt(){v||g()}function ei(n){n.charCode&&(c[0].focus(),c.set_val(String.fromCharCode(n.charCode)))}function ot(){v=!1,g()}function et(){v=!0,b()}function pt(n){ot(n),kt()}function lt(n){et(n),ii()}function st(){var t=c.element().value,i;!y&&typeof t=="string"&&t.length>0&&(c.element().value="",kt(),t=ur.encodeUrl(t),i=nt.logoBingSearchUrl.replace("{0}",t),window.open(i,"mc_bingSearch"),g())}function gt(n){v&&n.keyCode===13&&st()}function ht(){b(),h&&!k&&(h.set_style({display:""}),k=!0,l.add_class("Active"))}function ct(){h?k&&!v&&g():l.remove_class("Active")}var ni=f,at=e.getClickable(),yt=e.getEnableSearch(),fi=e.getShowCombinedOnly(),si=this,ut=null,p=null,k=!1,v=!1,y=!1,w=null,l=null,h=null,c=null,it=null,a=null,o=null,rt;ti()}function tr(n,i){function w(n){for(var r=Math.floor(n),i,t=0;t<h.length;t++){i=h[t];if(r>i)return i}return 1}function p(n,t){for(var r,i=0;i<c.length;i++){r=c[i];if(n>r)return r*t}return t}function r(n){var u=Math.log(n)/y,r=Math.floor(u),t=Math.pow(10,r),i=n/t;return 1===t?w(i):p(i,t)}var y=2.3025850929940459,e=n,l=i,v=0,a=0,h=[5,2],c=[5,2.5,2],o,f,s;t(e).add_class("ScaleBar"),o=document.createElement("span"),e.appendChild(o),f=new wi(o),s=document.createElement("span"),s.className="scalerect",e.appendChild(s),this.getMaxWidth=function(){return v},this.setMaxWidth=function(n){return v=n,n},this.getActualWidth=function(){return a},this.setActualWidth=function(n){return a=n,n},this.setColorsForBackground=function(n){n===d.light?f.setColorsForLightBackground():f.setColorsForDarkBackground()},this.setScale=function(n){var f,t,i,s,e,o;l===at.kilometersMeters?(s=n*this.getMaxWidth(),s>g.metersPerKm?(t=r(s/g.metersPerKm),f=Math.floor(t*g.metersPerKm/n),i=u.getString("L_scaleBarKilometers_Text")):(t=r(s),f=Math.floor(t/n),i=u.getString("L_scaleBarMeters_Text"))):(e=n*g.feetPerMeter,o=e*this.getMaxWidth(),o>g.feetPerMile?(t=r(o/g.feetPerMile),f=Math.floor(t*g.feetPerMile/e),i=u.getString("L_scaleBarMiles_Text")):l===at.milesFeet?(t=r(o),f=Math.floor(t/e),i=u.getString("L_scaleBarFeet_Text")):(t=r(o/g.feetPerYard),f=Math.floor(t*g.feetPerYard/e),i=u.getString("L_scaleBarYards_Text"))),this.setControlScale(f,i.replace("{num}",t))},this.setControlScale=function(n,t){this.setActualWidth(n+2),e.style.width=this.getActualWidth().toFixed()+"px",f.setTextContent(t)}}function pr(n){var e=200,u=n,i,f,r;t(u).add_class("DoubleScaleBar"),_scaleBarMiElement=document.createElement("span"),i=new tr(_scaleBarMiElement,at.milesFeet),i.setMaxWidth(e/2),u.appendChild(_scaleBarMiElement),f=document.createElement("span"),r=new tr(f,at.kilometersMeters),r.setMaxWidth(e/2),u.appendChild(f),this.setColorsForBackground=function(n){r.setColorsForBackground(n),i.setColorsForBackground(n)},this.setScale=function(n){r.setScale(n),i.setScale(n)}}function yr(t,i,u){function s(){o.setScale(t.getMetersPerPixel())}function l(){o.setColorsForBackground(d.getImageryBackground(t.getImageryId()))}function c(){if(e){n.removeHandler(e),e=null;var t=f.length;while(t--)n.removeHandler(f[t]);f.length=0}}var h=r("div",u.getClassName(),i),o,f,e;u.getDomElement=function(){return h},o=new pr(h),o.setScale(t.getMetersPerPixel()),f=[n.addHandler(t,"viewchangeend",s),n.addHandler(t,"imagerychanged",l),n.addHandler(t,"modechanged",s)],e=n.addHandler(t,"ondispose",c)}function ir(i,r){function vt(){var n=i.getOptions();return!(n.disablePanning||n.disableMouseInput||n.disableUserInput)}function at(){var n=i.getOptions();return!(n.disableZooming||n.disableMouseInput||n.disableUserInput)}function bt(n){var r=Math.round(i.getTargetZoom()),t=1<<r,u=new pt(r,Math.floor(n.x*t),Math.floor(n.y*t));return dt.fromTileId(u,!1)}function kt(){var n=i.getOptions().labelOverlay;ot=n===ft.hidden?!0:r}function ri(){var n=null,t=i.getImageryId();switch(t){case"Road":n=fi;break;case"Aerial":n=hi;break;case"EnhancedBirdseye":case"NativeBirdseye":u.removeLayer(l),l=null;break;default:c.removeLayer(l),l=null,st()}n!==l&&(et(),c.removeLayer(l),c.addLayer(n),l=n,rt())}function oi(n){p=n}function ui(){s&&(n.removeHandler(s),s=null,h||(p=null,h=n.addHandler(i,"mousemove",oi)),o&&it())}function rt(){h&&(n.removeHandler(h),h=null),s||(s=n.addHandler(i,"mousemove",lt));var r=Math.round(i.getTargetZoom()),t=y.getMapTargetMercatorBounds(i);c.loadQuadkeysForMercatorBounds(t,r),p&&(lt(p),p=null)}function ei(n){return v&&(window.clearTimeout(v),v=null),n.handled=!1,!1}function si(n){if(n.targetType!=="map"&&n.target.pointerEvents!=="none"||n.mouseMoved)return n.handled=!1,!1;if(v)return n.handled=!0,!0;var i=new f(n.getX(),n.getY()),t=g(i);return t?(v=window.setTimeout(function(){ci(t.hotRegion,i,t.worldPoint)},250),n.handled=!0,!0):(n.handled=!1,!1)}function ci(t,r,f){var s,h,a,o;v=null,s={hotRegion:t,cancelDefault:!1,clickLocation:i.tryPixelToLocation(r,null,{normalizeLongitude:!1})},n.invoke(u,"click",s),h=t.bmv;if(!s.cancelDefault&&h){var y=h.tl,l=h.br,b=h.z,p=h.c,w=360*Math.floor(f.x),c=180*Math.floor(f.y),e;y&&l?(a=ti.fromEdges(y.y+c,y.x+w,l.y+c,l.x+w),ut(a.center,s.clickLocation),e={bounds:a,animate:!0},vt()||(o=i.getCenter(),ut(o,s.clickLocation),e.center=o),at()||(e.center=e.center||e.bounds.center,delete e.bounds),i.setView(e)):p&&b&&(o=vt()?new ii(p.y+c,p.x+w):i.getCenter(),ut(o,s.clickLocation),e={center:o,zoom:at()?b:i.getZoom(),animate:!0},i.setView(e))}}function ut(n,t){while(n.longitude-t.longitude>180&&n.longitude>t.longitude)n.longitude-=360;while(t.longitude-n.longitude>180&&n.longitude<t.longitude)n.longitude+=360}function g(n){var s=i.getMode().tryPixelToMercatorPoint,t,l,r,e,u,o;if(s){t=s(n),l=new f(t.x,t.y),t.x=(t.x%1+1)%1,t.y=(t.y%1+1)%1;var v=bt(t),h=c.getTileHotRegionsForQuadkey(v),a=h.length;while(a--){r=h[a];if(ot&&r.type==="label")continue;if(r.getMercatorBounds().contains(t)){e=r.boundRegions,u=e.length;while(u--){o=e[u];if(o.getMercatorBounds().contains(t))if(o.isMercatorPointInBoundRegion(t))return{hotRegion:r,worldPoint:l}}}}}return null}function it(){var t={hotRegion:o,cancelDefault:!1};n.invoke(u,"leave",t),!t.cancelDefault&&a&&(ht.set_style({cursor:a}),a=null),o=null}function lt(i){var s;if(i.targetType!=="map"&&i.target.pointerEvents!=="none")if(o)var c=!0,l=!1,e=null;else return;if(!c)var v=new f(i.getX(),i.getY()),h=g(v),e=h&&h.hotRegion,c=o&&(!e||e.id!==o.id),l=e&&(!o||o.id!==e.id);c&&it(),o=e,l&&(s={hotRegion:e,cancelDefault:!1},n.invoke(u,"enter",s),!s.cancelDefault&&e&&e.bmv&&(!r||e.type!=="label")&&(a=ht.get_style("cursor"),tt.isWebkit&&a.toLowerCase().indexOf("/cursors/grab.cur")!==-1?a=wt.Grab:t.Browser.is_ie&&(a+=", "+wt.Grab),(vt()||at())&&ht.set_style({cursor:"pointer"})))}function et(){s||(s=n.addHandler(i,"mousemove",lt)),w||(w=n.addHandler(i,"click",si)),d||(_mapMouseClickDoubleHandle=n.addHandler(i,"dblclick",ei)),b||(b=n.addHandler(i,"viewchangeend",rt)),k||(k=n.addHandler(i,"viewchangestart",ui))}function st(){h&&(n.removeHandler(h),h=null),s&&(n.removeHandler(s),s=null),w&&(n.removeHandler(w),w=null),d&&(n.removeHandler(d),d=null),b&&(n.removeHandler(b),b=null),k&&(n.removeHandler(k),k=null),o&&it()}function yt(){c.getLayerCount()>0?et():st()}var u=this,s,w,d,ni,gt,b,k,ot=r,c=new wr,wt={Grab:"url("+nt.cursorPath+"grab.cur)"+tt.cursorHotspot+", default"},ht=t(i.getRootElement()),a=null,o=null,fi=new ct(e.Globals.hotRegionsRoadUrl,null,i,"r"),hi=new ct(e.Globals.hotRegionsAerialWithLabelsUrl,null,i,"a"),l=null,p,h,v;u.getHotRegionAtPoint=function(n){var t=g(n);return t&&t.hotRegion},u.enable=function(){et(),ni=n.addHandler(i,"maptypechanged",kt),gt=n.addHandler(i,"imagerychanged",ri),kt(),ri()},u.disable=function(){st(),n.removeHandler(gt),n.removeHandler(ni),o=null},u.createLayer=function(n,t,i,r){return new ct(n,t,i,r)},u.addLayer=function(n,t){c.addLayer(n,t),yt(),rt()},u.removeLayer=function(n){c.removeLayer(n),yt()},i.addComponent("hotRegions",u),u.enable()}function bt(n,t){function a(n){var i=[],r=n.length,t;while(r--)t=n[r],i.push(new f(t.x,t.y));return i}var i,e,u,r,o,c,s;n.boundRegions=[];var v=n.boundRegions,l=n.brs,h=l.length;while(h--)i=l[h],ci(i)?(r=a(i),r.push(r[0]),e=new ni(t,r),v.push(e)):i&&i.x&&i.y&&i.r&&(e=new gt(t,new f(i.x,i.y),i.r),v.push(e));if(n.hbrs){n.highlightBoundRegions=[];var p=n.highlightBoundRegions,y=n.hbrs,h=y.length;while(h--){u=y[h];if(u)switch(u.t){case"polygon":r=a(u.v),r.push(r[0]),o=new ni(t,r),p.push(o);break;case"circle":o=new gt(t,new f(u.x,u.y),u.r),p.push(o)}}}return c=/^YN/i,s=n.ypid,s&&c.test(s)&&(n.ypid=s.substring(2)),n.getLocationCenter=bt.prototype.getLocationCenter,n.getMercatorBounds=bt.prototype.getMercatorBounds,n}function fi(n){this.hotRegions=n}function ni(n,t){this._tileId=n,this._quadkeyTilePoints=t}function gt(n,t,i){this._tileId=n,this._quadkeyTilePointCenter=t,this._quadkeyTilePointRadius=i}function lr(i){function b(n){var r=!1,t;return n.hotRegion.type==="vm"&&(e.VenueMaps?(h||(h=new e.VenueMaps.VenueMapFactory(i)),t=h.getActiveVenueMap(),t&&n.hotRegion.vmid===t.id||(r=!0)):r=!0),r}function ct(n){b(n)&&(n.cancelDefault=!0,s!==n.hotRegion.vmid&&ut(n.hotRegion.vmid))}function lt(n){b(n)&&(n.cancelDefault=!0,o=l.get_style("cursor"),tt.isWebkit&&o.toLowerCase().indexOf("/cursors/grab.cur")!==-1?o=k.Grab:t.Browser.is_ie&&(o+=", "+k.Grab),s===n.hotRegion.vmid?l.set_style({cursor:"wait"}):l.set_style({cursor:"pointer"}),f=n.hotRegion,ht())}function vt(n){b(n)&&(o&&(l.set_style({cursor:o}),o=null),w(),f=null)}function w(){g(),a&&(i.entities.remove(a),a=null)}function ht(){var r,u,n,t;w();if(f){a=new di({zIndex:-1}),r=f.highlightBoundRegions?f.highlightBoundRegions:f.boundRegions,u=r.length;while(u--)n=r[u],n.type==="polygon"&&(t=new er(n.getLocations(),{strokeThickness:1,strokeColor:new yi(255,0,0,0),fillColor:new yi(0,0,0,0)}),t.pointerEvents="none",a.push(t));i.entities.push(a),s!==f.vmid&&yt()}}function yt(){if(!r){d=n.addHandler(i,"mousemove",at),r=document.createElement("span"),r.style.cssText="position:absolute;visibility:hidden;background-color:white;border: 1px solid black;padding:5px;";var t=f.name?u.getString("L_VenueMapExplorerTooltip_Text").replace("{0}",f.name):u.getString("L_VenueMapExplorerTooltip_Text").replace(" {0}","");r.appendChild(document.createTextNode(t)),i.getRootElement().appendChild(r)}}function g(){r&&(n.removeHandler(d),r.parentNode.removeChild(r),r=null)}function at(n){r.style.visibility="visible",r.style.left=i.getWidth()/2+16+n.getX()+"px",r.style.top=i.getHeight()/2+16+n.getY()+"px"}function st(){v||(v=n.addHandler(i.getComponent("hotRegions"),"click",ct),p=n.addHandler(i.getComponent("hotRegions"),"enter",lt),y=n.addHandler(i.getComponent("hotRegions"),"leave",vt))}function rt(){v&&(n.removeHandler(v),v=null),p&&(n.removeHandler(p),p=null),y&&(n.removeHandler(y),y=null)}function ut(n){ot(n),e.loadModule("Microsoft.Maps.VenueMaps",{callback:function(){h||(h=new e.VenueMaps.VenueMapFactory(i));var t=h.getActiveVenueMap();t&&t.dispose(),h.create({venueMapId:n,success:ft,error:et})}})}function ft(n){if(s===n.id){var r=n.bestMapView;r.animate=!0,i.setView(r),n.show(),it(!0)}}function ot(t){s=t,f&&(l.set_style({cursor:"wait"}),g()),n.invoke(c,"activationstart",t)}function it(t){var i=s;s=null,f&&(o&&(l.set_style({cursor:o}),o=null),w()),n.invoke(c,"activationend",{isSuccess:t,venueMapId:i})}function et(n,t){s===t.venueMapId&&it(!1)}var c=this,v,p,y,h,s,o,k={Grab:"url("+nt.cursorPath+"grab.cur)"+tt.cursorHotspot+", default"},l=t(i.getRootElement()),f,a,r,d;c.enable=function(){st()},c.disable=function(){rt(),s=null},i.addComponent("venueMapsExplorer",c),c.enable()}function et(){return null}function hr(n,t){function o(r,f){var c,e,o,h;r||f&&f.httpStatus===401?(c=r&&r.authenticationResultCode=="ValidCredentials",i=c&&typeof r.sessionId=="string"&&r.sessionId.length>0?r.sessionId:null,c||(e=document.createElement("div"),e.style.cssText="position:absolute; width:100%; top:50%; text-Align:center",o=document.createElement("div"),o.innerHTML=u.getString("L_invalidcredentials_text"),o.style.cssText="background: #f8f7f5; padding:10px; color: #000;",e.appendChild(o),h=n&&n.getRootElement(),h&&h.appendChild(e))):i=t,s()}var e=this,f=nt.logServiceUriFormat,r,h,i;if(f){r=[],f=f.replace(/{credentials}/,t),this.getCredentials=function(n){r.push(n)};function s(){e.getCredentials=function(n){n(i)};var n=r.length;while(n--)e.getCredentials(r[n])}wt.getObjectAsyncWithNoJsonso(f,o,ri.getNext(),1e4)}else i=t,this.getCredentials=function(n){n(i)}}function c(n){function i(i){if(!i||i.handled!==!0){t&&t.dispose();var r=c.getRenderer(n.overlays);typeof r=="function"&&(t=new r(n,n.getRootElement(),n.overlays))}}var t;this.update=i}function si(n){this.setOptions(n)}function li(n){this.setOptions(n)}function ei(n){this.setOptions(n)}function ut(n){this._namedEntities={},ut.baseConstructor.call(this,n),this.setOptions(n)}function ui(n){this.setOptions(n)}function oi(n){this.setOptions(n)}function vi(n){this.setOptions(n)}function ai(n){this.setOptions(n)}var e=window[$MapsNamespace].Maps,a=e.InternalNamespaceForDelay,gi=a.KeyEventArgs,u=window[$MapsNamespace].Maps.Resources,p=a.Common,or=a.DelayMap,ri=a.IdGenerator,wt=a.Network,nr=a.PRF,it,b,d,at,g,st,h;nr.start("mapdelay"),u.init({L_invalidcredentials_text:'The specified credentials are invalid. You can sign up for a free developer account at <a href="http://www.bingmapsportal.com">http://www.bingmapsportal.com</a>',L_scaleBarKilometers_Text:"{num} km",L_scaleBarMeters_Text:"{num} m",L_scaleBarMiles_Text:"{num} miles",L_scaleBarYards_Text:"{num} yds",L_scaleBarFeet_Text:"{num} feet",L_compassTooltip_Text:"Click to pan in any direction",L_rotateLeftTooltip_Text:"Rotate left",L_rotateRightTooltip_Text:"Rotate right",L_zoomInTooltip_Text:"Zoom in",L_zoomOutTooltip_Text:"Zoom out",L_zoomSliderTooltip_Text:"Move slider to zoom in or out",L_compassNorthLabel_Text:"N",L_mapTypeAutoName_Text:"Automatic",L_mapTypeAutoDescription_Text:"Switches to the best map style as you zoom",L_mapTypeRoadName_Text:"Road",L_mapTypeRoadDescription_Text:"A standard road map",L_mapTypeAerialName_Text:"Aerial",L_mapTypeAerialDescription_Text:"A detailed look from above",L_mapTypeBirdsEyeName_Text:"Bird's eye",L_mapTypeBirdsEyeDescription_Text:"A better angle of aerial photography",L_mapTypeCollinsBartName_Text:"London Street Map",L_mapTypeCollinsBartDescription_Text:"Detailed maps for Greater London",L_mapTypeOrdnanceSurveyName_Text:"Ordnance Survey Map",L_mapTypeOrdnanceSurveyDescription_Text:"Maps for outdoor life",L_aerialShowLabels_Text:"show labels",L_aerialEnableTilt_Text:"show angled view",L_BingSearchWatermark_Text:"Search on Bing",L_BingSearchGoTooltip_Text:"Search on Bing",L_BingLogoTooltip_Text:"Bing Maps",L_world_Text:"World",L_currentIconTooltip_Text:"Return to last location",L_VenueMapExplorerTooltip_Text:"View {0} Map"});var t=e.Gimme,nt=e.Globals,ru=e.Map,f=e.Point,ft=e.LabelOverlay,n=e.Events,ti=e.LocationRect,ii=e.Location,fu=e.Pushpin,w=e.MapTypeId,di=e.EntityCollection,rt=a.MercatorCube,pi=a.SpatialCache,dt=e.QuadKey,pt=a.TileId,uu=e.AltitudeReference,kt=a.Rect,yi=e.Color,er=e.Polygon,lt=a.MapMath,tt=a.Quirks,ur=a.IOSec,v=new function(){function s(n,t,i){var r=document.createElement(n||"div");return t&&(r.className=t),i&&i.appendChild(r),r}function e(n){var i,t=u.length;while(t--)u[t][0]===n&&(i=u[t][1]);return i}function o(t,i,r){n.invoke(t,i,r)}function f(n){n.stopPropagation()}function r(n){h=!0,n.stopPropagation()}var u=[],h=!1;this.addIgnoreEvents=function(n){t(n).add_event("mousedown",i).add_event("mouseup",i).add_event("mousewheel",i).add_event("dblclick",i).add_event("contextmenu",i).add_event("keydown",f).add_event("keyup",i).add_event("click",i).add_event("touchstart",r).add_event("touchmove",r).add_event("touchend",r).add_event("touchcancel",r)},this.removeIgnoreEvents=function(n){t(n).remove_event("mousedown",i).remove_event("mouseup",i).remove_event("mousewheel",i).remove_event("dblclick",i).remove_event("contextmenu",i).remove_event("keydown",f).remove_event("keyup",i).remove_event("click",i).remove_event("touchstart",r).remove_event("touchmove",r).remove_event("touchend",r).remove_event("touchcancel",r)},this.createElement=s,this.createToolButton=function(n,t){var i=s("a","NavBar_button NavBar_toolButton "+(n||""));return i.href="#",t&&(i.title=t),i},this.registerNavigationBar=function(n,t){u.push([n,t])},this.removeNavigationBar=function(n){var t=u.length;while(t--)if(u[t][0]===n){u.splice(t,1);break}},this.reportAction=function(n,t){var r=e(n),i;r&&(i=t.currentTarget,i&&o(r,"navbaraction",{id:i.id,typeName:i.className,title:i.title}))},this.getNavBar=e,this.invokeEvent=o,this.ignoreEvent=function(n){n.stopPropagation(),n.preventDefault()},this.stopPropagation=f,this.isTouch=function(){return h},this.addClass=function(n,t){var i=new RegExp("(^| )"+t+"( |$)");return n+(n.search(i)===-1?" "+t:"")},this.removeClass=function(n,t){var i=new RegExp("(^| )"+t+"( |$)");return n.replace(i,"$1").replace(/^\s+|\s+$/g,"")}};a.NavigationCommon=v,it={auto:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeAutoName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeAutoDescription_Text")}})},r:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeRoadName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeRoadDescription_Text")}})},a:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeAerialName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeAerialDescription_Text")}})},be:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeBirdsEyeName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeBirdsEyeDescription_Text")}})},cb:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeCollinsBartName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeCollinsBartDescription_Text")}})},os:new function(){p.defineGetter(this,"title",{get:function(){return u.getString("L_mapTypeOrdnanceSurveyName_Text")}}),p.defineGetter(this,"description",{get:function(){return u.getString("L_mapTypeOrdnanceSurveyDescription_Text")}})}},b={left:0,middle:1,right:2,getName:function(n){switch(n){case b.left:return"left";case b.middle:return"middle";case b.right:return"right"}return""},isValid:function(n){return n===b.left||n===b.middle||n===b.right}},e.ClientRegion=b,k.Layout={TopBottom:"topBottom",BottomTop:"bottomTop",LeftRight:"leftRight",RightLeft:"rightLeft"},d={light:0,dark:1},d.getImageryBackground=function(n){return n==="Aerial"||n==="EnhancedBirdseye"||n==="NativeBirdseye"||n==="streetside"?d.dark:d.light},at={milesFeet:0,milesYards:1,kilometersMeters:2},g={metersPerKm:1e3,yardsPerMeter:1.0936133,yardsPerMile:1760,feetPerYard:3,feetPerMeter:3.2808399,feetPerMile:5280},bt.prototype={getLocationCenter:function(){var i=this.highlightBoundRegions?this.highlightBoundRegions:this.boundRegions,u=0,e=0,n=i.length,r=n,t;while(r--)t=i[r].getMercatorBounds().getCenter(),u+=t.x,e+=t.y;return this._locationCenter=rt.toLocation(new f(u/n,e/n)),this.getLocationCenter=function(){return this._locationCenter},this._locationCenter},getMercatorBounds:function(){var i=null,t=null,u=null,f=null,h=this.boundRegions,r=this.boundRegions.length-1,n;if(r>-1){n=h[r].getMercatorBounds(),i=n.y,t=n.x,u=n.getRight(),f=n.getBottom();while(r--){var n=h[r].getMercatorBounds(),c=n.y,s=n.x,e=n.getRight(),o=n.getBottom();c<i&&(i=c),o>f&&(f=o),s<t&&(t=s),e>u&&(u=e)}}return this._mercatorBounds=new kt(t,i,u-t,f-i),this.getMercatorBounds=function(){return this._mercatorBounds},this._mercatorBounds}},fi.prototype={getHotRegionsForTile:function(n){var r={},a,s,t,l,e,u;for(this._tileIndexedHotRegions=r,a=n.length,s=this.hotRegions,t=0,l=s.length;t<l;t++){var o=s[t],i=o.getMercatorBounds(),v=new f(i.x,i.y),p=new f(i.getRight(),i.getBottom()),w=y.getMercatorBoundsDescriptor(v,p,a),h=y.getQuadkeysForBounds(w),c=h.length;while(c--)e=h[c],u=r[e],u?u.push(o):r[e]=[o]}return this.getHotRegionsForTile=function(n){var t=this._tileIndexedHotRegions[n];return t?t:[]},this.getHotRegionsForTile(n)}};var ct=function(n,t,i,r){function d(n,t){return n.z-t.z}function c(n){var t;return t=n==="l1"?1:n==="l2"?2:n.length+2}function rt(n,t){var f=c(n),o=e[f],r=h[f],p,v,s,u,w,a;o||(o=e[f]={},r=h[f]=[]);if(o[n])return!1;o[n]=t,r.push(n),p=(Math.ceil(i.getHeight()/1024)+2*l)*(Math.ceil(i.getWidth()/1024)+2*l);while(r.length>p){for(v||(v=tt(y.getMapTargetMercatorBounds(i),Math.max(f-2,0))),s=!1,u=0,w=r.length;u<w;u++)if(it(v,r[u])===-1){a=r.splice(0,u+1),delete o[a.pop()],r=r.concat(a),s=!0;break}if(!s)break}return!0}function it(n,t){var i=n.length;while(i--)if(n[i]===t)return i;return-1}function tt(n,t){var u=new f(n.left,n.top),r=new f(n.right,n.bottom),i=y.getMercatorBoundsDescriptor(u,r,t);return y.getQuadkeysForBounds(i)}function k(n,t){var i,f,e;delete u[t];if(n&&b(n.hrs)){i=null,i=t==="l1"?new pt(-1,0,0):t==="l2"?new pt(0,0,0):dt.toTileId(t);var r=[],o=n.hrs,s=o.length;while(s--)f=new bt(o[s],i),r.push(f);r.sort(d),e=new fi(r),rt(t,e)}}function s(i){var v=c(i),a=e[v],f,s,o,l,h;a&&a[i]||(p(),u[i]||(u[i]={requestTime:+new Date},f="",s="",i==="l1"?s="&lod=1":i!=="l2"&&(f=i),o="0",f!==""&&(o=f.charAt(f.length-1)),l=typeof t=="function"?t(i):n,h=l.replace("{subdomain}",o).replace("{quadkey}",f).replace("{jsonp}",nt).replace("{jsonso}",encodeURIComponent(r+"|"+i))+s,wt.getObjectAsyncCacheFriendly(h)))}function a(){u={}}function p(){var i=+new Date,t,n;for(t in u)n=u[t].requestTime,n&&i-n>g&&delete u[t]}function v(n){var r=y.tileQuadkeyToSheetQuadkey(n),u=n.length,i=e[u],t;if(i){t=i[r];if(t)return t.getHotRegionsForTile(n);s(r)}return[]}function w(n,t){var i;if(t===1)s("l1");else if(t===2)s("l2");else{var c=Math.max(t-2,0),a=new f(n.left,n.top),h=new f(n.right,n.bottom),l=y.getMercatorBoundsDescriptor(a,h,c),o=y.getQuadkeysForBounds(l),u=e[t],r=o.length;while(r--)i=o[r],u&&u[i]||s(i)}}function b(n){return typeof Array.isArray=="function"?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"}var o=this,nt="microsoftMapsHotRegionsCacheCallback",e={},h={},l=1,g=1e4,u={};o.getTileHotRegionsForQuadkey=v,o.loadQuadkeysForMercatorBounds=w,o.getHotRegionsNetworkCallback=k,o.clearRequestedQuadkeys=a,o.getId=function(){return r}},wr=function(){function i(t){var i=n.length;while(i--)if(n[i].layer.getId()===t)return i;return null}function o(t,r){if(r){var f=decodeURIComponent(r).split("|"),e=f[0],o=f[1],u=i(e);u!==null&&n[u].layer.getHotRegionsNetworkCallback(t,o)}}function c(t){var i=[],r=n.length;while(r--)i=i.concat(n[r].layer.getTileHotRegionsForQuadkey(t));return i}function h(t,i){var r=n.length;while(r--)n[r].layer.loadQuadkeysForMercatorBounds(t,i)}function u(n,t){return t.zIndex-n.zIndex}function r(t,r){t instanceof ct&&(r||(r=0),i(t.getId())===null&&(n.push({zIndex:r,layer:t}),n.sort(u)))}function e(t){if(t instanceof ct){var r=i(t.getId());r!==null&&(n.splice(r,1),t.clearRequestedQuadkeys())}}function f(){return n.length}var t=this,s="microsoftMapsHotRegionsCacheCallback",n=[];t.addLayer=r,t.removeLayer=e,t.getLayerCount=f,t.getTileHotRegionsForQuadkey=c,t.loadQuadkeysForMercatorBounds=h,window[s]=o},y=new function(){this.tilePixelToLocation=function(n,t){var u=this._tilePixelToMapPixel(n,t),r=this._mapPixelToMercatorPoint(n.levelOfDetail,u);return rt.toLocation(r)},this.tilePixelToMapPixel=function(n,t){return new f(n.x*1024+t.x,n.y*1024+t.y)},this.mapPixelToMercatorPoint=function(n,t){var i,r;return i=n<0?1/(1<<Math.abs(n)):1<<n,r=new f(t.x/i/1024,t.y/i/1024)},this.getMapTargetMercatorBounds=function(n){var r=n.getMode().tryPixelToMercatorPoint,u,t;if(r){var e=n.getHeight()/2,o=n.getWidth()/2,s=new f(-o,-e),i=r(s);return i.x=(i.x%1+1)%1,i.y=(i.y%1+1)%1,u=new f(o,e),t=r(u),t.x=(t.x%1+1)%1,t.y=(t.y%1+1)%1,{left:i.x,right:t.x,top:i.y,bottom:t.y}}return null},this.getQuadkeysForBounds=function(n){var h=n.levelOfDetails,o=n.tileIdXCount,c=n.tileIdYCount,a=n.tileIdX0,l=n.tileIdY0,s=n.tileIdCount,r=[],i,u,e,t,f;while(o--){i=c,u=(a+o)%s;while(i--)e=(l+i)%s,t=dt.fromTileId(new pt(h,u,e)),t.length===0&&(f=0,f++),r.push(t)}return r},this.getMercatorBoundsDescriptor=function(n,t,i){var u=pi.mercatorXYToTileId(n,i),o=pi.mercatorXYToTileId(t,i),r=1<<i,s=(o.x-u.x+r)%r+1,h=u.x,e,f;return s===1&&t.x<n.x&&(s=r,h=0),f=(o.y-u.y+r)%r+1,e=u.y,f===1&&t.y<n.y&&(f=r,e=0),{mercatorTL:n,mercatorBR:t,levelOfDetails:i,tileIdTL:u,tileIdBR:o,tileIdX0:h,tileIdY0:e,tileIdXCount:s,tileIdYCount:f,tileIdCount:r}},this.tileQuadkeyToSheetQuadkey=function(n){var i=n.length,t="l1";return i>2?t=n.substr(0,i-2):i===2&&(t="l2"),t}};ni.prototype={type:"polygon",getLocations:function(){var n,t;this._locations=[];var r=this._locations,u=this.getMercatorPoints(),i=u.length;while(i--)n=u[i],t=rt.toLocation(n),r.push(t);return this.getLocations=function(){return this._locations},r},getMercatorPoints:function(){var n,t;this._mercatorPoints=[];var r=this._mercatorPoints,u=this.getMapPixels(),i=u.length;while(i--)n=u[i],t=y.mapPixelToMercatorPoint(this._tileId.levelOfDetail,n),r.push(t);return this.getMercatorPoints=function(){return this._mercatorPoints},r},getMapPixels:function(){var t;this._mapPixels=[];var i=this._mapPixels,r=this._quadkeyTilePoints,n=r.length;while(n--)t=y.tilePixelToMapPixel(this._tileId,r[n]),i.push(t);return this.getMapPixels=function(){return this._mapPixels},i},getMercatorBounds:function(){var e=null,o=null,f=null,u=null,t=this.getMercatorPoints(),n=t.length-1,i,r;if(n>-1){e=f=t[n].x,o=u=t[n].y;while(n--)i=t[n].x,r=t[n].y,i>e?e=i:i<f&&(f=i),r>o?o=r:r<u&&(u=r)}return this._mercatorBounds=new kt(f,u,e-f,o-u),this.getMercatorBounds=function(){return this._mercatorBounds},this._mercatorBounds},isMercatorPointInBoundRegion:function(n){for(var i=this.getMercatorPoints(),h=i.length-1,l=n.x,e=n.y,f=!1,t=0,r=h-1;t<h;r=t++){var u=i[t].y,o=i[r].y,s=i[t].x,c=i[r].x;u>e!=o>e&&l<(c-s)*(e-u)/(o-u)+s&&(f=!f)}return f}},gt.prototype={getLocations:function(){var n=this.getMercatorBounds(),o=new f(n.x,n.y),e=new f(n.getRight(),n.y),h=new f(n.getRight(),n.getBottom()),s=new f(n.x,n.getBottom()),t=rt.toLocation(o),r=rt.toLocation(e),i=rt.toLocation(h),u=rt.toLocation(s);return this._locationBounds=[t,r,i,u,t],this.getLocations=function(){return this._locationBounds},this._locationBounds},type:"circle",getLocationCenter:function(){return this._locationCenter=rt.toLocation(this.getMercatorCenter()),this.getLocationCenter=function(){return this._locationCenter},this._locationCenter},getMercatorCenter:function(){return this._mercatorCenter=y.mapPixelToMercatorPoint(this._tileId.levelOfDetail,this.getMapCenter()),this.getMercatorPoints=function(){return this._mercatorCenter},this._mercatorCenter},getMercatorRadius:function(){return this._mercatorRadius=y.mapPixelToMercatorPoint(this._tileId.levelOfDetail,new f(0,this._quadkeyTilePointRadius)).y,this.getMercatorRadius=function(){return this._mercatorRadius},this._mercatorRadius},getPixelRadius:function(){return this._quadkeyTilePointRadius},getMapCenter:function(){return this._mapCenter=y.tilePixelToMapPixel(this._tileId,this._quadkeyTilePointCenter),this.getMapCenter=function(){return this._mapCenter},this._mapCenter},getMercatorBounds:function(){var i=this.getMercatorCenter(),n=this.getMercatorRadius(),t=2*n;return this._mercatorBounds=new kt(i.x-n,i.y-n,t,t),this.getMercatorBounds=function(){return this._mercatorBounds},this._mercatorBounds},isMercatorPointInBoundRegion:function(n){var r=this.getMercatorCenter(),u=this.getMercatorRadius(),t=n.x-r.x,i=n.y-r.y;return t*t+i*i-u*u<=0}};var i=v.ignoreEvent,s=v.stopPropagation,l=v.reportAction,o=v.invokeEvent,r=v.createElement,vt=v.createToolButton,ot=v.addIgnoreEvents,hi=v.removeIgnoreEvents,ht=v.isTouch,yt=v.addClass,fr=v.removeClass,rr=p.extend,ci=p.isArray;st=or.prototype,st.showOverlays=function(t){var r,d,i,nt,y,b,v,p,ft,k,u,l,g,o,s,f,rt,ot,w,et,h,tt,a;if(this._map){r=this._map,d=!1,e.Themes&&(d=r.getTheme()instanceof e.Themes.BingTheme),i=new ut({className:"MicrosoftNav"}),i.setNextSibling(r.getRootElement().firstChild),nt={breadcrumb:{overlayClass:yt(i.getClassName(),"NavBar_breadcrumb"),constructor:ai,args:t,displayField:"showBreadcrumb",defaultDisplay:!1},compass:{constructor:ei},zoom:{constructor:li},modeselector:{constructor:si,args:t,displayField:"showMapTypeSelector",defaultDisplay:!0,postCreate:function(n,t){b=new kr(r,t,n)}}},y=d?["modeselector","breadcrumb","zoom","compass"]:["breadcrumb","compass","zoom","modeselector"];if(t.showDashboard!==!1){for(v=new ut({className:"OverlaysTL",stopPropagation:!0}),t.showDualMapTypeSelector&&(i.setOptions({className:yt(i.getClassName(),"NavBar_typeButton_count2")}),t.mapTypes=[]),ft=y.length,p=0;p<ft;p++){k=y[p],u=nt[k];if(u){if(u.displayField){l=t[u.displayField];if(l!==undefined&&!l||l===undefined&&!u.defaultDisplay)continue}u.overlayClass&&i.setOptions({className:yt(i.getClassName(),u.overlayClass)}),g=new u.constructor(u.args),v.addNamedEntity(k,g),u.postCreate&&u.postCreate(g,v)}}i.addNamedEntity("overlaysTL",v)}(t.showScalebar!==!1||t.showCopyright!==!1||t.showLogo!==!1)&&(s=new ut({className:"OverlaysBL"}),s.setParentOverride(r.getRootElement()),f=new ut({className:"OverlaysBR"}),f.setParentOverride(r.getRootElement()),t.showLogo!==!1&&(rt=new oi(t),o=t.logoPosition==="bottomLeft"?s:f,o.addNamedEntity("logo",rt)),t.showScalebar!==!1&&(ot=new vi,o=t.scalebarPosition==="bottomLeft"?s:f,o.addNamedEntity("scalebar",ot)),t.showCopyright!==!1&&(w={},t.copyrightStacked===!0&&(w.className="CopyrightContainer stacked"),et=new ui(w),o=t.copyrightPosition==="bottomLeft"?s:f,o.addNamedEntity("copyright",et)),t.copyrightPosition==="bottomRight"&&t.showLogo!==!1&&f.setOptions({className:"OverlaysBR-logoAware"}),i.addNamedEntity("overlaysBR",f),i.addNamedEntity("overlaysBL",s));function it(){var n=i.getClassName();h&&(n=fr(n,"MapTypeId_"+h)),h=r.getMapTypeId(),n=yt(n,"MapTypeId_"+h),i.setOptions({className:n})}tt=n.addHandler(r,"maptypechanged",it),it();function st(){a&&(n.removeHandler(a),a=null,n.removeHandler(tt))}a=n.addHandler(r,"ondispose",st),r.overlays=i,n.invoke(r,"overlayscreationstart",{map:r,overlays:i}),this._overlays||(this._overlays=new c(r),this._overlays.update()),b&&r.addComponent("navigationBar",b)}},st.showHotRegions=function(n){this._map&&new ir(this._map,n)},st.showVenueMapsExplorer=function(){this._map&&new lr(this._map)},st.authenticate=function(n){this._map&&(this._authentication=new hr(this._map,n))},st.getCredentials=function(n){this._map&&this._authentication.getCredentials(n)},c.renderers={},c.registerOverlay=function(n,t){c.renderers[n]=t},c.getRenderer=function(n){return c.renderers[n.toString()]},a.Overlays=c,si.prototype={_className:"NavBar_modeSelectorControlContainer",_mapTypes:null,_disableBirdseye:!1,getDomElement:et,getClassName:function(){return this._className},getMapTypes:function(){return this._mapTypes},getDisableBirdseye:function(){return this._disableBirdseye},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),ci(t.mapTypes)&&(this._mapTypes=t.mapTypes,i=!0),typeof t.disableBirdseye=="boolean"&&(this._disableBirdseye=t.disableBirdseye,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[ModeSelectorControl]"}},c.registerOverlay("[ModeSelectorControl]",nu),li.prototype={_className:"NavBar_zoomControlContainer",_zoomInVisible:!0,_zoomOutVisible:!0,_zoomBarVisible:!0,_zoomBarToggle:!0,getDomElement:et,getClassName:function(){return this._className},getZoomInVisible:function(){return this._zoomInVisible},getZoomOutVisible:function(){return this._zoomOutVisible},getZoomBarVisible:function(){return this._zoomBarVisible},getZoomBarToggle:function(){return this._zoomBarToggle},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),typeof t.zoomInVisible=="boolean"&&(this._zoomInVisible=t.zoomInVisible,i=!0),typeof t.zoomOutVisible=="boolean"&&(this._zoomOutVisible=t.zoomOutVisible,i=!0),typeof t.zoomBarVisible=="boolean"&&(this._zoomBarVisible=t.zoomBarVisible,i=!0),typeof t.zoomBarToggle=="boolean"&&(this._zoomBarToggle=t.zoomBarToggle,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[ZoomControl]"}},c.registerOverlay("[ZoomControl]",tu),ei.prototype={_className:"NavBar_compassControlContainer",_compassVisible:!0,_rotateVisible:!0,getDomElement:et,getClassName:function(){return this._className},getCompassVisible:function(){return this._compassVisible},getRotateVisible:function(){return this._rotateVisible},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),typeof t.compassVisible=="boolean"&&(this._compassVisible=t.compassVisible,i=!0),typeof t.rotateVisible=="boolean"&&(this._rotateVisible=t.rotateVisible,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[CompassControl]"}},c.registerOverlay("[CompassControl]",sr),rr(ut,di),h=ut.prototype,h.getDomElement=et,h._nextSibling=null,h.getNextSibling=function(){return this._nextSibling},h.setNextSibling=function(n){this._nextSibling=n},h._parentOverride=null,h.getParentOverride=function(){return this._parentOverride},h.setParentOverride=function(n){this._parentOverride=n},h._className="",h.getClassName=function(){return this._className},h._stopPropagation=!1,h.getStopPropagation=function(){return this._stopPropagation},h.setOptions=function(t,i){var r=ut.superClass.setOptions.call(this,t,!0);return t&&(typeof t.className=="string"&&(this._className=t.className,r=!0),typeof t.stopPropagation=="boolean"&&(this._stopPropagation=t.stopPropagation,r=!0)),r&&!i&&n.invoke(this,"entitychanged",{entity:this}),r},h.addNamedEntity=function(n,t){this._namedEntities[n]=t,this.push(t)},h.insertNamedEntity=function(n,t,i){this._namedEntities[n]=t,this.insert(t,i)},h.getNamedEntity=function(n){return this._namedEntities[n]},h.removeNamedEntity=function(n){var t=this._namedEntities[n];t&&(delete this._namedEntities[n],this.remove(t))},h.toString=function(){return"[OverlayEntityCollection]"},c.registerOverlay("[OverlayEntityCollection]",ar),ui.prototype={_className:"CopyrightContainer",getDomElement:et,getClassName:function(){return this._className},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[CopyrightControl]"}},c.registerOverlay("[CopyrightControl]",cr),oi.prototype={_className:"LogoContainer",_clickable:!0,_enableSearch:!0,_showCombinedOnly:!1,getDomElement:et,getClassName:function(){return this._className},getClickable:function(){return this._clickable},getEnableSearch:function(){return this._enableSearch},getShowCombinedOnly:function(){return this._showCombinedOnly},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),typeof t.clickable=="boolean"&&(this._clickable=t.clickable,i=!0),typeof t.enableSearch=="boolean"&&(this._enableSearch=t.enableSearch,i=!0),t.showLogo==="combined"&&(this._showCombinedOnly=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[LogoControl]"}},c.registerOverlay("[LogoControl]",vr),vi.prototype={_className:"ScaleBarContainer",getDomElement:et,getClassName:function(){return this._className},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[ScalebarControl]"}},c.registerOverlay("[ScalebarControl]",yr),ai.prototype={_className:"BreadcrumbContainer",getDomElement:et,getClassName:function(){return this._className},setOptions:function(t){if(t){var i=!1;typeof t.className=="string"&&(this._className=t.className,i=!0),i&&n.invoke(this,"entitychanged",{entity:this})}},toString:function(){return"[BreadcrumbControl]"}},c.registerOverlay("[BreadcrumbControl]",iu),delete window[$MapsNamespace].Maps.initMapDelayCode,a.Dynamic&&a.Dynamic.done("Microsoft.Maps.Overlays"),nr.end("Map delay initialized","mapdelay")},window[$MapsNamespace].Maps.Map&&window[$MapsNamespace].Maps.initMapDelayCode&&window[$MapsNamespace].Maps.initMapDelayCode(),window.$MapsNamespace=window.$MapsNamespace||"Microsoft",window[$MapsNamespace]=window[$MapsNamespace]||{},window[$MapsNamespace].Maps=window[$MapsNamespace].Maps||{},window[$MapsNamespace].Maps.initInfoboxRenderer=function(){function h(u){function h(t,i,u){t.trueEntity&&h(t.trueEntity,i,u);if(r.hasHandler(t,i)){var f=n.Screen.get_mouse_pos(u),e=new v(l,"infobox",t,i,f.x,f.y,0,!1,u);r.invoke(t,i,e)}}function a(t,r){var o=r&&r[f],e=o&&o.infoBoxNode,u;if(e){u=n(e).select("a[href!=#recycle],link[href],button,input,command,textarea,select").filter(function(n){return!n.disabled}),u=u[t.forwardFocus?0:u.length-1];if(u&&r.getTypeName()!==i.InfoboxType.mini)try{u.focus(),t.nativeEvent.preventDefault()}catch(s){}}}var l=u,y="cm"+c.getNext(),f=y+"_etr";this.shouldDraw=function(n,t){return n.getVisible()&&(n.getClip()===!1?t.actualBounds.contains(n.getLocation()):t.currentBounds.contains(n.getLocation()))},this.update=function(c,v){var si=v.customRenderer,et=v.update,ri=c.trueEntity||c,p,y,st,gt,bt,rt,w,at,sr,ti,bi,ut,ft,tt,d,it,ht,k,gi,g,b,wt,ei,fi,hr,nt,pi,ui,tr,ir,ii,di,lt,or,ur,ni,hi,yt,ai,nr,yi,ki,wi,rr,ot,vt;r.hasHandler(ri,"focusreceived")||r.addHandler(ri,"focusreceived",function(n){a(n,c)}),y=c[f],y?(et=y.updateEntity||et,y.updateEntity=!1):(p=t(null,e.safariRenderHack),st=document.createElement("a"),st.href="#recycle",st.innerHTML="&nbsp;",st.style.cssText="position:absolute;height:1px;width:1px;top:0;left:0;text-decoration:none;line-height:0;",gt=st.cloneNode(!0),st.onclick=gt.onclick=function(){return!1},st.onfocus=gt.onfocus=function(){var n=ri.getPushpin();n&&n.receiveFocus()},y={dom:p,recycleAnchors:{a:st,z:gt}},c[f]=y,et=!0),p=y.dom,bt=c.getTypeName(),rt=c.getHtmlContent()==null||c.getTitle()!==null&&c.getTitle()!==""||c.getDescription()!==null&&c.getDescription()!="";if(et){y.htmlContent!=null&&rt&&(y.htmlContent.style.display="none",y.infoBoxNode!=null&&(y.infoBoxNode.style.display=""));if(rt){y.infoBoxNode==null?(w=t("div"),p.appendChild(w),w.className=bt,y.infoBoxNode=w):(w=y.infoBoxNode,w.className=bt),w.offsetWidth,c.getShowCloseButton()&&y.closeButtonNode==null&&rt?(at=t("a"),sr=document.createTextNode("x"),w.appendChild(at),at.className="infobox-close",at.href="#",at.appendChild(sr),ti=function(n){n.preventDefault(),(c.trueEntity||c).setOptions({visible:!1})},n(at).add_event("click",ti).add_event("touchend",ti),y.closeButtonHideEvent=ti,y.closeButtonNode=at):c.getShowCloseButton()&&rt||!y.closeButtonNode||(n(y.closeButtonNode).remove_event("click",y.closeButtonHideEvent).remove_event("touchend",y.closeButtonHideEvent),y.closeButtonHideEvent=null,w.removeChild(y.closeButtonNode),y.closeButtonNode=null),bi=c.getHeight()-55,c.getActions().length>0&&(bi-=32),ut=c.getTitle(),ut===""&&(ut=null),ft=c.getDescription(),ft===""&&(ft=null),tt=y.contentNode,tt==null&&rt?(tt=t("div"),tt.className="infobox-body",w.appendChild(tt),y.contentNode=tt):tt==null||rt||(w.removeChild(tt),y.contentNode=null),d=y.titleDivNode,ut!=null&&y.titleDivNode==null&&(d=t("div"),d.className="infobox-title",tt.insertBefore(d,tt.firstChild),y.titleDivNode=d),it=y.titleLinkNode,it!=null&&(y.titleLinkHandler!=null&&(n(it).remove_event("click",y.titleLinkHandler).remove_event("touchend",y.titleLinkHandler),y.titleLinkHandler=null),it.firstChild&&it.removeChild(it.firstChild),y.titleLinkNode=null,it=null);while(d!=null&&d.firstChild)d.removeChild(d.firstChild);ut==null&&d!=null&&(tt.removeChild(d),y.titleDivNode=null),ut!=null&&(c.getTitleClickHandler()!=null?(it=t("a"),d.appendChild(it),y.titleLinkNode=it,it.innerHTML=ut,it.setAttribute("href","#"),n(it).add_event("click",c.getTitleClickHandler()).add_event("touchend",c.getTitleClickHandler()),y.titleLinkHandler=c.getTitleClickHandler()):d.innerHTML=ut),ut!==null&&c.getTitleAction()!==null&&(ht=c.getTitleAction(),y.titleAction=[],k=t("a"),k.className="infobox-titleActionLink",k.appendChild(document.createTextNode(ht.label)),ui=ht.url?ht.url:"#",k.setAttribute("href",ui),ht.urltarget&&k.setAttribute("target",ht.urltarget),gi=document.createElement("span"),gi.className="infobox-titleActionSeparator",d.appendChild(gi),d.appendChild(k),n(k).add_event("click",ht.eventHandler).add_event("touchend",ht.eventHandler)),g=y.descriptionNode,ft!=null&&g==null&&(g=t("div"),g.cssText="height:"+bi+"px",g.className="infobox-info",y.actionsNode?tt.insertBefore(g,y.actionsNode):tt.appendChild(g),y.descriptionNode=g);if(ft!=null)if(ft.innerHTML){while(g.firstChild)g.removeChild(g.firstChild);g.appendChild(ft)}else g.innerHTML=ft;else g&&(p.removeChild(g),y.descriptionNode=null);b=c.getActions();if(b.length>0)if(y.actionsNode!=null){while(y.actionsNode.firstChild)y.actionsNode.removeChild(y.actionsNode.firstChild);wt=y.actionsNode}else wt=t("div"),y.actionsNode=wt,wt.className="infobox-actions",tt.appendChild(wt);if(y.actionsEventHandlers!=null)try{while((ei=y.actionsEventHandlers.pop())!=null)n(ei.elem).remove_event("click",ei.event).remove_event("touchend",ei.event)}catch(vr){}if(b.length>0){for(fi=t("ul"),fi.className="infobox-actions-list",hr=[],y.actionsEventHandlers=[],nt=0;nt<b.length;nt++){var fr=t("li"),k=t("a"),vi,ar=l.getImageryId();switch(ar){case"Aerial":case"EnhancedBirdseye":case"NativeBirdseye":vi="dark";break;default:vi="light"}pi=b[nt][vi+"Icon"]||b[nt].icon,ui=b[nt].url?b[nt].url:"#",k.setAttribute("href",ui),b[nt].urltarget&&k.setAttribute("target",b[nt].urltarget),pi?(k.className="icon",tr=t("img"),tr.src=pi,k.appendChild(tr),ir=t("span"),ir.className="iconUnderline",k.appendChild(ir)):(k.innerHTML=b[nt].label,k.id=b[nt].id),fr.appendChild(k),fi.appendChild(fr),n(k).add_event("click",b[nt].eventHandler).add_event("touchend",b[nt].eventHandler),y.actionsEventHandlers.push({elem:k,event:b[nt].eventHandler})}wt.appendChild(fi)}c.getShowPointer()&&y.pointerNode==null&&rt?(ii=t("div"),ii.className="infobox-stalk",w.appendChild(ii),y.pointerNode=ii):c.getShowPointer()&&rt||!y.pointerNode||(w.removeChild(y.pointerNode),y.pointerNode=null)}else di=c.getHtmlContent(),lt=y.htmlContent,ut==null&&ft==null&&di!=null&&(lt==null&&(lt=t("div"),p.appendChild(lt),y.htmlContent=lt),lt.innerHTML=di,w=lt,y.infoBoxNode!=null&&(y.infoBoxNode.style.display="none"),y.pointerNode!=null&&(y.pointerNode.style.display="none"),p.style.pointerEvents="all")}ri.getPushpin()&&(or=y.recycleAnchors.a,ur=y.recycleAnchors.z,p.insertBefore(or,p.firstChild),p.appendChild(ur));var dt="position:absolute;overflow:visible;white-space:normal;line-height:16px;pointer-events:none;",kt="position:absolute;background-color:white;border:1px solid rgb(136, 136, 136);left:0px;top:0px;pointer-events:auto;",li="width:33px;height:38px;overflow:hidden;position:absolute;z-index:1;",pt=c.getClip();if(!si&&(!v.linear||!y.isDrawn||pt===!1)){ni=l.tryLocationToPixel(c.getLocation(),pt===!1?s.control:s.viewport);if(ni){var er=c.getOffset(),ci=c.getAnchor(),cr=pt===!1?0:v.parentOffsetLeft||0,lr=pt===!1?0:v.parentOffsetTop||0,oi=ni.x-cr,ct=ni.y-lr;oi=oi+er.x-ci.x,ct=ct-er.y-ci.y,et&&rt?(dt+="left:"+oi+"px;",dt+="top:"+ct+"px;"):(p.style.position="absolute",p.style.left=oi+"px",p.style.top=ct+"px",p.style.display="")}else et?dt+="display:none;":p.style.display="none"}et&&rt&&(hi=c.getZIndex(),typeof hi=="number"&&(dt+="z-index:"+hi+";"),kt+="width:"+c.getWidth(),kt+=typeof c.getWidth()=="number"?"px;":";",kt+="height:"+c.getHeight(),kt+=typeof c.getHeight()=="number"?"px;":";",pt===!1&&(p.className=u.getRootElement().className,n(p).remove_class("MapTypeId_m").add_class("InfoboxExtension")),p.style.cssText=dt+e.safariRenderHack,li+="left:20px;",li+="top:"+c.getHeight()+"px;",bt==="Infobox"?y.infoBoxNode.style.cssText=kt:(ot=c.getWidth(),b&&b.length>5&&ot<390&&(ot=ot+16),vt=c.getHeight(),yt="",yt+="width:"+ot,yt+=typeof ot=="number"?"px;":";",yt+="height:"+vt,yt+=typeof vt=="number"?"px;":";",y.infoBoxNode.style.cssText=yt),c.getShowPointer()&&bt==="Infobox"&&(y.pointerNode.style.cssText=li)),c.getShouldFireEvents()&&(y.mapImageryChanged||(ai=function(){r.invoke(c,"entitychanged",{entity:c})},r.addHandler(l,"imagerychanged",ai),y.mapImageryChanged=ai),y.mouseDoubleClickInfobox||(nr=function(n){h(c,"dblclick",n),n.stopPropagation()},n(p).add_event("dblclick",nr,!0),y.mouseDoubleClickInfobox=nr),y.mouseEnterInfobox||(yi=function(n){h(c,"mouseenter",n),n.stopPropagation()},n(p).add_event("mouseenter",yi,!0),y.mouseEnterInfobox=yi),y.mouseLeaveInfobox||(ki=function(n){h(c,"mouseleave",n),n.stopPropagation()},n(p).add_event("mouseleave",ki,!0),y.mouseLeaveInfobox=ki),y.mouseClickInfobox||(wi=function(n){h(c,"click",n),n.stopPropagation()},n(p).add_event("click",wi,!1),y.mouseClickInfobox=wi),n(p).add_event("touchstart",o)),si?y.isDrawn?et&&si.updateEntity(c):(si.addEntity(c,p),y.isDrawn=!0):(y.isDrawn||(pt===!1?(rr=u.getRootElement().parentNode,rr.appendChild(p)):v.parentDom.appendChild(p),y.isDrawn=!0),w&&et===!0&&(bt!==i.InfoboxType.standard||c.getHtmlContent()!==null)&&(ot=w.offsetWidth,vt=w.offsetHeight,c.setCalculatedSize({width:ot,height:vt}),ct=ct+ci.y-vt,p.style.top=ct+"px"))},this.remove=function(t,i){if(t&&t[f]){var u=t[f],e=u.dom;e&&u.isDrawn&&(r.removeHandler(u.mapImageryChanged),n(e).remove_event("mouseenter",u.mouseEnterInfobox,!0).remove_event("mouseleave",u.mouseLeaveInfobox,!0).remove_event("click",u.mouseClickInfobox,!1).remove_event("dblclick",u.mouseDoubleClickInfobox,!0).remove_event("touchstart",o,!1),u.mapImageryChanged=u.mouseEnterInfobox=u.mouseLeaveInfobox=u.mouseClickInfobox=u.mouseDoubleClickInfobox=null,e.parentNode&&e.parentNode.removeChild(e)),u.updateEntity=u.updateEntity||i.update,u.isDrawn=!1,i.customRenderer&&i.customRenderer.removeEntity(t)}},this.dispose=function(n){delete n[f]}}var i=window[$MapsNamespace].Maps,n=i.Gimme,y=i.Globals,r=i.Events,l=i.Infobox,s=i.PixelReference,u=i.InternalNamespaceForDelay,a=u.CompositeMode,f=u.Common,v=u.MouseEventArgs,a=u.CompositeMode,c=u.IdGenerator,e=u.Quirks,o=f.stopPropagation,t=f.createElement,o=f.stopPropagation,t=f.createElement;new function(){var n=[],t=[],i=function(i,r){var u=null,f;if(r instanceof l){f=n.length;while(f--)n[f]===i&&(u=t[f]);u||(u=new h(i),n.push(i),t.push(u))}return u};a.registerEntityRenderer(i)},delete window[$MapsNamespace].Maps.initInfoboxRenderer},window[$MapsNamespace].Maps.Map&&window[$MapsNamespace].Maps.initInfoboxRenderer&&window[$MapsNamespace].Maps.initInfoboxRenderer()