window.$MapsNamespace=window.$MapsNamespace||"Microsoft",window[$MapsNamespace]=window[$MapsNamespace]||{},window[$MapsNamespace].Maps=window[$MapsNamespace].Maps||{},window[$MapsNamespace].Maps.initMapAnalytics=function(){var n="length",o="indexOf",l="apply",r=window[$MapsNamespace].Maps,c=r.Analytics=r.Analytics||{},f=r.Gimme,e=r.Globals,i=r.Events,u=r.InternalNamespaceForDelay,h=u.Common,t;if(!e.disableAnalytics){function s(r){function y(n){if(n&&n.currentTarget){var t=f(n.currentTarget).get_attr("uici");t&&d({uici:t,autoLog:!0})}}function ti(n){if(n){n.lod=u.getZoom().toPrecision(2),n.mo=u.getHeading().toPrecision(3);var t=u.getCenter();n.mc="["+t.latitude.toPrecision(6)+","+t.longitude.toPrecision(6)+"]",n.til=a,k=!1}}function ii(){var n=u.getTileDownloadMetrics();a=n>a?n:a+n,k=!0}function gt(){!k||u.isDownloadingTiles()||t.getDataBacklog()>0||d({})}function ni(n){n.componentName===ot&&(ut(),i.removeHandler(tt),tt=null)}function ut(){u&&u.overlays&&ft(u.overlays.getDomElement())}function lt(){for(var r=p[n],t,i=0;i<r;i++)t=p.shift(),typeof t[3]!="string"&&(t[3]=l?v:c),rt.LogIG.apply(s,t)}function d(n){var e,o,r,i,u;if(n){var t=n.customData||{},f=l?v:n.IG||c,a=n.autoLog;ti(t),t.uici=n.uici;if(a)for(e in h)h[e](t);if(n&&n.onClientAction)n.onClientAction(t);o=n.forceDispatch||!1,r=[bt,0,o,f];for(i in t)u=t[i],i!==null&&i!==undefined&&u!==null&&u!==undefined&&r.push(i,u);f&&it?rt.LogIG.apply(s,r):p.push(r)}}function ft(n){f(n).select(et).add_event(g,y)}function vt(n){f(n).add_event(g,y)}function at(n,t){typeof n=="string"&&typeof t=="function"&&(h[n]=t)}function yt(n){typeof n=="string"&&delete h[n]}function pt(n){it||(n&&(c=n.pageViewId||null,v=n.sessionKey||null,b=n.cId||null,st=n.pcId||null),(c||l&&v)&&(it=!0,lt(),ct=window.setInterval(gt,dt)))}function ht(){var r,n;window.clearInterval(ct),t.dispose(),i.removeHandler(nt),nt=null,i.removeHandler(w),w=null;for(r in h)delete h[r];h=null,u&&u.overlays&&(n=f(u.overlays.getDomElement()),n.select(et).remove_event(g,y))}function wt(){u&&(nt=i.addHandler(u,"ondispose",ht),u.getComponent(ot)?ut():tt=i.addHandler(u,"componentadded",ni),u.addComponent("analyticsManager",s),w=i.addHandler(u,"tiledownloadcomplete",ii))}var s=r.getComponent("analyticsManager");if(s)return s;s=this;var c,b,st=null,et="a,input[type=button],input[type=submit],input[type=checkbox],input[type=radio],button,.button,.pathNode",bt="MAPSAction",g="mousedown",h={},u=r,nt=null,tt=null,it=!1,ot="navigationBar",p=[],v=null,l=e.frontdoorLogUrl?!1:!0,kt=e.biciLoggingService||e.frontdoorLogUrl,dt=3e4,ct=-1,ri="tdd",a=0,k=!0,ui=null,w=null,rt=new function(){function w(){r("Init","CI","Base",!1),a=window.setInterval(h,y),v=1,f(window).add_event("beforeunload",s)}function r(i,r,u,f,e){var y="",w=e||c,v,a,h,p;if(w){if(f)for(v=0;v<f[n];v+=2)a=f[v],h=f[v+1],(typeof a!="string"||a[o]('"')<0)&&(a='"'+a+'"'),typeof h=="string"&&h[o]("{")<0&&h[o]('"')<0&&(h='"'+h+'"'),y+=a+":"+h+",";p='"TS":'+ +new Date,y+=l?p:'"T":"CI.'+i+'",'+(typeof r=="number"?'"K":'+r:'"FID":"'+r+'"')+","+p,t.add(w,y),u&&s()}}function k(){var n=kt;return n+=l?"?sk=%ig%&pid="+e.biciPID+"&DATA=":"?IG=%ig%"+(b?"&CID="+b:"")+(st?"&PM=Y":"")+"&TYPE=Event.ClientInst&DATA="}function s(){while(t.getDataBacklog()>0)h()}function h(){if(t.getDataBacklog()>0&&!u.isDownloadingTiles()){var n=t.fetchNextRequest(k(),p);n&&(i.ping.src=n)}}var i=this,p=2048,y=2e3,v=0,a=-1;i.ping=new Image,i.LogIG=function(n,t,i,u){v||w(),r(n,t,i,[].slice.apply(arguments).slice(4),u)}};s.removePreProcessor=yt,s.addPreProcessor=at,s.registerAction=vt,s.registerChildActions=ft,s.logClientAction=d,s.dispose=ht,s.enable=pt,wt()}c.AnalyticsManager=s}t=new function(){var t={},i=0;this.getDataBacklog=function(){return i},this.add=function(r,u){var f=t[r],u="{"+encodeURIComponent(u)+"}";f||(f=t[r]=[]),f.push(u),i+=u[n]},this.dispose=function(){for(var n in t)t.hasOwnProperty(n)&&(t[n]=null,delete t[n]);t={},i=0},this.fetchNextRequest=function(r,u){var l=null,e,s,v,o,a,f,c;if(typeof r=="string"&&u>0)for(e in t){s=e&&t[e],r=r.replace("%ig%",e),v=r[n]+e[n]+1;if(h.isArray(s)&&s[n]>0){o="[",a=!0;while(s[n]>0){f=s.shift();if(f){c=f[n],i-=c,f=(a?"":",")+f,c=f[n];if(c+o[n]+v>=u){l=r+o+"]";break}o+=f,a=!1}}l=r+o+"]",delete t[e];break}}return l}},delete window[$MapsNamespace].Maps.initMapAnalytics,u&&u.Dynamic&&u.Dynamic.done("Microsoft.Maps.Analytics"),u&&u.PRF.end("Module initialized","Microsoft.Maps.Analytics",{module:"Analytics"})},window[$MapsNamespace].Maps.Map&&window[$MapsNamespace].Maps.initMapAnalytics&&window[$MapsNamespace].Maps.initMapAnalytics()